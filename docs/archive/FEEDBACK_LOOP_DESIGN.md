# ç”¨æˆ·åé¦ˆé—­ç¯æœºåˆ¶è®¾è®¡æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.0
> **åˆ›å»ºæ—¶é—´**: 2025-11-01
> **çŠ¶æ€**: è®¾è®¡é˜¶æ®µ â†’ MVP å¼€å‘ä¸­
> **è´Ÿè´£äºº**: AI Sculptor

---

## ğŸ“‹ ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [ä¸šåŠ¡ç›®æ ‡](#ä¸šåŠ¡ç›®æ ‡)
3. [æ ¸å¿ƒè®¾è®¡åŸåˆ™](#æ ¸å¿ƒè®¾è®¡åŸåˆ™)
4. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
5. [æ•°æ®æ¨¡å‹è®¾è®¡](#æ•°æ®æ¨¡å‹è®¾è®¡)
6. [å·¥ä½œæµç¨‹è¯¦è§£](#å·¥ä½œæµç¨‹è¯¦è§£)
7. [åé¦ˆæŒ‡æ ‡ä½“ç³»](#åé¦ˆæŒ‡æ ‡ä½“ç³»)
8. [æƒé‡è°ƒæ•´ç®—æ³•](#æƒé‡è°ƒæ•´ç®—æ³•)
9. [MVP å®æ–½è®¡åˆ’](#mvp-å®æ–½è®¡åˆ’)
10. [API é›†æˆè§„åˆ’](#api-é›†æˆè§„åˆ’)
11. [éªŒæ”¶æ ‡å‡†](#éªŒæ”¶æ ‡å‡†)
12. [é£é™©å’Œç¼“è§£æªæ–½](#é£é™©å’Œç¼“è§£æªæ–½)
13. [æœªæ¥è·¯çº¿å›¾](#æœªæ¥è·¯çº¿å›¾)

---

## åŠŸèƒ½æ¦‚è¿°

### é—®é¢˜èƒŒæ™¯

å½“å‰ç³»ç»Ÿå·¥ä½œæµç¨‹ï¼š
```
çˆ¬å–æ´»åŠ¨ â†’ AIåˆ†ç±» â†’ äººå·¥å®¡æ ¸ â†’ ç”Ÿæˆå‘å¸ƒå†…å®¹ â†’ å‘å¸ƒåˆ°å°çº¢ä¹¦ â†’ [ç»“æŸ]
                                                              â†‘
                                                          ç¼ºå°‘åé¦ˆç¯èŠ‚
```

**å­˜åœ¨çš„é—®é¢˜**:
- âŒ æ— æ³•çŸ¥é“å“ªäº›æ´»åŠ¨ç±»å‹æ›´å—ç”¨æˆ·æ¬¢è¿
- âŒ æ¯æ¬¡æŠ“å–ä½¿ç”¨å›ºå®šæƒé‡ï¼Œæ— æ³•ä¸ªæ€§åŒ–ä¼˜åŒ–
- âŒ äººå·¥å®¡æ ¸æ—¶ç¼ºä¹æ•°æ®æ”¯æ’‘ï¼Œä¾èµ–ä¸»è§‚åˆ¤æ–­
- âŒ æ— æ³•è¿½è¸ªå‘å¸ƒæ•ˆæœå’ŒROI

### è§£å†³æ–¹æ¡ˆ

æ„å»º**é—­ç¯åé¦ˆæœºåˆ¶**ï¼Œè®©ç³»ç»Ÿèƒ½å¤Ÿå­¦ä¹ å’Œä¼˜åŒ–ï¼š

```
çˆ¬å–æ´»åŠ¨ â†’ AIåˆ†ç±» â†’ äººå·¥å®¡æ ¸ â†’ ç”Ÿæˆå‘å¸ƒ â†’ å‘å¸ƒå°çº¢ä¹¦
   â†‘                                            â†“
   â””â”€â”€â”€â”€â”€â”€ è°ƒæ•´æƒé‡ â†â”€â”€ åˆ†æåé¦ˆ â†â”€â”€ æ”¶é›†åé¦ˆæ•°æ® â†â”˜
           (è‡ªåŠ¨ä¼˜åŒ–)      (ç”ŸæˆæŠ¥å‘Š)    (Short.io + å°çº¢ä¹¦)
```

**æ ¸å¿ƒèƒ½åŠ›**:
1. âœ… **è®°å½•å‘å¸ƒä¿¡æ¯** - è¿½è¸ªæ¯æ¬¡å‘å¸ƒåŒ…å«çš„æ´»åŠ¨
2. âœ… **æ”¶é›†åé¦ˆæ•°æ®** - Short.ioç‚¹å‡» + å°çº¢ä¹¦äº’åŠ¨æŒ‡æ ‡
3. âœ… **åˆ†æç”¨æˆ·åå¥½** - è¯†åˆ«é«˜è¡¨ç°æ´»åŠ¨çš„å…±åŒç‰¹å¾
4. âœ… **åŠ¨æ€è°ƒæ•´æƒé‡** - è‡ªåŠ¨æé«˜å—æ¬¢è¿ç±»å‹çš„ä¼˜å…ˆçº§
5. âœ… **ç”Ÿæˆåˆ†ææŠ¥å‘Š** - å¯è§†åŒ–æ•°æ®ï¼Œè¾…åŠ©å†³ç­–

---

## ä¸šåŠ¡ç›®æ ‡

### ä¸»è¦ç›®æ ‡

1. **æé«˜ç”¨æˆ·å‚ä¸åº¦**
   - ç›®æ ‡ï¼šå‘å¸ƒå3ä¸ªæœˆå†…ï¼Œå¹³å‡ engagement score æå‡ 30%
   - æŒ‡æ ‡ï¼šç‚¹å‡»ç‡ã€æ”¶è—ç‡ã€è¯„è®ºç‡

2. **ä¼˜åŒ–å†…å®¹è´¨é‡**
   - ç›®æ ‡ï¼šå‡å°‘ä½è¡¨ç°æ´»åŠ¨æ¯”ä¾‹ï¼ˆä» 40% é™è‡³ 20%ï¼‰
   - æŒ‡æ ‡ï¼šä½äºå¹³å‡ engagement çš„æ´»åŠ¨å æ¯”

3. **èŠ‚çœäººå·¥æ—¶é—´**
   - ç›®æ ‡ï¼šäººå·¥å®¡æ ¸æ—¶é—´å‡å°‘ 30%
   - æ–¹æ³•ï¼šå€™é€‰åˆ—è¡¨ä¸­é«˜è´¨é‡æ´»åŠ¨å æ¯”æé«˜

4. **ä¸ªæ€§åŒ–æ¨è**
   - ç›®æ ‡ï¼šæ¯ä¸ªè´¦å·æ ¹æ®è‡ªå·±çš„å—ä¼—è‡ªåŠ¨ä¼˜åŒ–
   - æ–¹æ³•ï¼šåŸºäºå†å²æ•°æ®è‡ªåŠ¨è°ƒæ•´æ´»åŠ¨ç±»å‹åå¥½

### æ¬¡è¦ç›®æ ‡

- æ•°æ®é©±åŠ¨å†³ç­–ï¼šæ‰€æœ‰è°ƒæ•´éƒ½æœ‰æ•°æ®æ”¯æ’‘
- é€æ˜å¯è§£é‡Šï¼šæ¯æ¬¡è°ƒæ•´éƒ½æœ‰è¯¦ç»†è¯´æ˜
- å¯è¿½æº¯æ€§ï¼šå®Œæ•´çš„å†å²è®°å½•å’Œç‰ˆæœ¬æ§åˆ¶

---

## æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. æ¸è¿›å¼ä¼˜åŒ–

```
é˜¶æ®µ1 (Week 1-3):   æ”¶é›†åŸºçº¿æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æƒé‡
é˜¶æ®µ2 (Week 4-7):   é¦–æ¬¡å°å¹…è°ƒæ•´ (Â±10%)ï¼Œè§‚å¯Ÿæ•ˆæœ
é˜¶æ®µ3 (Week 8-15):  æŒç»­ä¼˜åŒ–ï¼Œè°ƒæ•´å¹…åº¦å¯å¢åŠ  (Â±20%)
é˜¶æ®µ4 (Week 16+):   æˆç†ŸæœŸï¼Œç²¾ç»†åŒ–è°ƒæ•´
```

**åŸåˆ™**:
- å‰æœŸä¿å®ˆï¼ŒåæœŸå¤§èƒ†
- å°æ­¥å¿«è·‘ï¼Œå¿«é€Ÿè¿­ä»£
- æ•°æ®é©±åŠ¨ï¼Œé¿å…è¿‡æ‹Ÿåˆ

### 2. äººæœºåä½œ

```
MVP é˜¶æ®µ:       äººå·¥è¾“å…¥ â†’ ç³»ç»Ÿåˆ†æ â†’ äººå·¥ç¡®è®¤è°ƒæ•´
è¿‡æ¸¡é˜¶æ®µ:       APIè‡ªåŠ¨é‡‡é›† â†’ ç³»ç»Ÿåˆ†æ â†’ äººå·¥ç¡®è®¤è°ƒæ•´
æˆç†Ÿé˜¶æ®µ:       APIè‡ªåŠ¨é‡‡é›† â†’ ç³»ç»Ÿåˆ†æ â†’ è‡ªåŠ¨è°ƒæ•´ (äººå·¥ç›‘ç£)
```

**åŸåˆ™**:
- åˆæœŸäººå·¥ç¡®è®¤ï¼Œç¡®ä¿å®‰å…¨
- é€æ­¥å¢åŠ è‡ªåŠ¨åŒ–ç¨‹åº¦
- å§‹ç»ˆä¿ç•™äººå·¥å¹²é¢„èƒ½åŠ›

### 3. å¤šç»´åº¦åˆ†æ

ä¸åªçœ‹å•ä¸€æŒ‡æ ‡ï¼Œç»¼åˆåˆ†æï¼š
- ğŸ“Š æ´»åŠ¨ç±»å‹ (market, festival, food, music, art, tech)
- ğŸ“ åœ°ç†ä½ç½® (SF, å—æ¹¾, åŠå²›, ä¸œæ¹¾)
- ğŸ’° ä»·æ ¼åŒºé—´ (free, $1-50, $50+)
- â° æ—¶é—´åå¥½ (å‘¨æœ« vs å·¥ä½œæ—¥, ç™½å¤© vs æ™šä¸Š)
- ğŸ·ï¸ ç‰¹æ®Šç‰¹å¾ (chinese_relevant, outdoor, family-friendly)

### 4. é˜²æ­¢è¿‡æ‹Ÿåˆ

**ä¿æŠ¤æªæ–½**:
- âœ… æœ€å°æ ·æœ¬é‡è¦æ±‚ (è‡³å°‘4æ¬¡å‘å¸ƒ)
- âœ… æƒé‡è°ƒæ•´ä¸Šä¸‹é™ (1-15ä¹‹é—´)
- âœ… å•æ¬¡è°ƒæ•´å¹…åº¦é™åˆ¶ (Â±10% æˆ– Â±20%)
- âœ… ç±»å‹å¤šæ ·æ€§ä¿æŠ¤ (æ¯ç±»è‡³å°‘ä¿ç•™10%å€™é€‰)
- âœ… æ»‘åŠ¨çª—å£ (åªçœ‹æœ€è¿‘8æ¬¡æ•°æ®)

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®é‡‡é›†å±‚ (Data Collection)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - Short.io API (ç‚¹å‡»æ•°æ®)                                   â”‚
â”‚  - å°çº¢ä¹¦ API (ç‚¹èµ/æ”¶è—/è¯„è®º/åˆ†äº«)  [æœªæ¥]                   â”‚
â”‚  - æ‰‹åŠ¨è¾“å…¥ (MVPé˜¶æ®µ)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚ (Data Storage)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SQLite Database:                                           â”‚
â”‚    - posts (å‘å¸ƒè®°å½•)                                        â”‚
â”‚    - event_performance (æ´»åŠ¨è¡¨ç°)                           â”‚
â”‚    - weight_adjustments (æƒé‡è°ƒæ•´å†å²)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åˆ†æå¼•æ“å±‚ (Analytics Engine)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - FeedbackAnalyzer (åé¦ˆåˆ†æå™¨)                            â”‚
â”‚  - EngagementScoreCalculator (å‚ä¸åº¦è®¡ç®—)                   â”‚
â”‚  - WeightRecommender (æƒé‡æ¨èå¼•æ“)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å†³ç­–å±‚ (Decision Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - WeightAdjuster (æƒé‡è°ƒæ•´å™¨)                              â”‚
â”‚  - ReportGenerator (æŠ¥å‘Šç”Ÿæˆå™¨)                             â”‚
â”‚  - ConfigManager (åŠ¨æ€é…ç½®ç®¡ç†)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application Layer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - scrape-events.js (åº”ç”¨åŠ¨æ€æƒé‡)                          â”‚
â”‚  - ai-classifier.js (ä½¿ç”¨è°ƒæ•´åçš„ä¼˜å…ˆçº§)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°å¢æ¨¡å—ç»“æ„

```
src/
â”œâ”€â”€ feedback/                           # æ–°å¢ï¼šåé¦ˆç³»ç»Ÿç›®å½•
â”‚   â”œâ”€â”€ feedback-tracker.js             # åé¦ˆè¿½è¸ªå™¨
â”‚   â”œâ”€â”€ feedback-analyzer.js            # åé¦ˆåˆ†æå¼•æ“
â”‚   â”œâ”€â”€ weight-adjuster.js              # æƒé‡è°ƒæ•´å™¨
â”‚   â”œâ”€â”€ performance-database.js         # æ€§èƒ½æ•°æ®åº“ç®¡ç†
â”‚   â””â”€â”€ report-generator.js             # æŠ¥å‘Šç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ collect-feedback.js                 # CLI: æ”¶é›†åé¦ˆæ•°æ®
â”œâ”€â”€ analyze-feedback.js                 # CLI: åˆ†æåé¦ˆ
â”œâ”€â”€ adjust-weights.js                   # CLI: è°ƒæ•´æƒé‡
â”œâ”€â”€ export-feedback.js                  # CLI: å¯¼å‡ºæ•°æ®å’ŒæŠ¥å‘Š
â”‚
â”œâ”€â”€ config-dynamic.json                 # åŠ¨æ€é…ç½®æ–‡ä»¶ (è‡ªåŠ¨ç”Ÿæˆ)
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ config-manager.js               # é…ç½®ç®¡ç†å™¨ (è¯»å–åŠ¨æ€é…ç½®)
â”‚
â””â”€â”€ (ç°æœ‰æ–‡ä»¶...)

output/
â”œâ”€â”€ reports/                            # æ–°å¢ï¼šåˆ†ææŠ¥å‘Šç›®å½•
â”‚   â”œâ”€â”€ feedback_report_YYYY-MM-DD.json
â”‚   â”œâ”€â”€ feedback_report_YYYY-MM-DD.html  # å¯é€‰
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ exports/                            # æ–°å¢ï¼šæ•°æ®å¯¼å‡ºç›®å½•
â”‚   â”œâ”€â”€ full_backup_YYYY-MM-DD.json
â”‚   â”œâ”€â”€ performance_data.csv
â”‚   â””â”€â”€ weight_history.json
â”‚
â””â”€â”€ (ç°æœ‰ç›®å½•...)
```

---

## æ•°æ®æ¨¡å‹è®¾è®¡

### 1. å‘å¸ƒè®°å½•è¡¨ (posts)

**ç”¨é€”**: è®°å½•æ¯æ¬¡å°çº¢ä¹¦å‘å¸ƒçš„åŸºæœ¬ä¿¡æ¯

```sql
CREATE TABLE posts (
  -- ä¸»é”®
  id INTEGER PRIMARY KEY AUTOINCREMENT,

  -- å‘å¸ƒæ ‡è¯†
  post_id TEXT UNIQUE NOT NULL,           -- å¦‚: post_2025-11-04_1530

  -- æ—¶é—´ä¿¡æ¯
  published_at TEXT NOT NULL,             -- ISO 8601æ ¼å¼
  week_identifier TEXT NOT NULL,          -- å¦‚: 2025-11-04_to_2025-11-10

  -- å‘å¸ƒé…ç½®
  platform TEXT DEFAULT 'xiaohongshu',    -- å‘å¸ƒå¹³å°
  total_events INTEGER NOT NULL,          -- åŒ…å«çš„æ´»åŠ¨æ•°é‡

  -- å…³è”ä¿¡æ¯
  review_file_path TEXT,                  -- å®¡æ ¸æ–‡ä»¶è·¯å¾„
  output_file_path TEXT,                  -- ç”Ÿæˆçš„å‘å¸ƒæ–‡ä»¶è·¯å¾„
  cover_image_path TEXT,                  -- å°é¢å›¾ç‰‡è·¯å¾„

  -- å¤–éƒ¨é“¾æ¥ (å¯é€‰)
  xiaohongshu_url TEXT,                   -- å°çº¢ä¹¦å¸–å­é“¾æ¥
  xiaohongshu_post_id TEXT,               -- å°çº¢ä¹¦å¸–å­ID

  -- å…ƒæ•°æ®
  created_at TEXT NOT NULL,
  updated_at TEXT,

  -- ç´¢å¼•
  INDEX idx_posts_week (week_identifier),
  INDEX idx_posts_published (published_at)
);
```

**ç¤ºä¾‹æ•°æ®**:
```json
{
  "id": 1,
  "post_id": "post_2025-11-04_1530",
  "published_at": "2025-11-04T15:30:00Z",
  "week_identifier": "2025-11-04_to_2025-11-10",
  "platform": "xiaohongshu",
  "total_events": 8,
  "review_file_path": "./output/review_2025-11-04_1530.json",
  "output_file_path": "./output/weekly_events_2025-11-04_1530.txt",
  "cover_image_path": "./output/covers/cover_2025-11-04_153025_123.png",
  "xiaohongshu_url": "https://xiaohongshu.com/...",
  "created_at": "2025-11-04T15:30:00Z"
}
```

---

### 2. æ´»åŠ¨è¡¨ç°è®°å½•è¡¨ (event_performance)

**ç”¨é€”**: è®°å½•æ¯ä¸ªæ´»åŠ¨çš„è¡¨ç°æ•°æ®å’Œåé¦ˆæŒ‡æ ‡

```sql
CREATE TABLE event_performance (
  -- ä¸»é”®
  id INTEGER PRIMARY KEY AUTOINCREMENT,

  -- å…³è”å…³ç³»
  post_id TEXT NOT NULL,                  -- å…³è” posts è¡¨
  event_id INTEGER,                       -- å…³è” events è¡¨ (å¯ä¸ºç©º)

  -- æ´»åŠ¨åŸºæœ¬ä¿¡æ¯ (å†—ä½™å­˜å‚¨ï¼Œä¾¿äºæŸ¥è¯¢)
  event_title TEXT NOT NULL,
  event_type TEXT,                        -- market/festival/food/music/art/tech/free
  event_url TEXT,
  location TEXT,
  location_category TEXT,                 -- sanfrancisco/southbay/peninsula/eastbay
  price TEXT,                             -- åŸå§‹ä»·æ ¼å­—ç¬¦ä¸²
  price_category TEXT,                    -- free/paid/expensive
  start_time TEXT,                        -- ISO 8601

  -- æ´»åŠ¨ç‰¹å¾ (ç”¨äºåˆ†æ)
  is_weekend BOOLEAN DEFAULT 0,           -- æ˜¯å¦å‘¨æœ«
  is_free BOOLEAN DEFAULT 0,              -- æ˜¯å¦å…è´¹
  is_outdoor BOOLEAN DEFAULT 0,           -- æ˜¯å¦æˆ·å¤–
  is_chinese_relevant BOOLEAN DEFAULT 0,  -- æ˜¯å¦ä¸­æ–‡ç›¸å…³

  -- åé¦ˆæŒ‡æ ‡ (æ ¸å¿ƒæ•°æ®)
  shortio_clicks INTEGER DEFAULT 0,       -- Short.io ç‚¹å‡»æ¬¡æ•° â­ æœ€é‡è¦
  xiaohongshu_likes INTEGER DEFAULT 0,    -- å°çº¢ä¹¦ç‚¹èµæ•°
  xiaohongshu_favorites INTEGER DEFAULT 0,-- å°çº¢ä¹¦æ”¶è—æ•°
  xiaohongshu_comments INTEGER DEFAULT 0, -- å°çº¢ä¹¦è¯„è®ºæ•°
  xiaohongshu_shares INTEGER DEFAULT 0,   -- å°çº¢ä¹¦åˆ†äº«æ•°

  -- è®¡ç®—å­—æ®µ
  engagement_score REAL DEFAULT 0,        -- ç»¼åˆå‚ä¸åº¦åˆ†æ•° (è‡ªåŠ¨è®¡ç®—)
  normalized_score REAL DEFAULT 0,        -- å½’ä¸€åŒ–åˆ†æ•° (0-1)

  -- å…ƒæ•°æ®
  feedback_collected_at TEXT,             -- åé¦ˆæ”¶é›†æ—¶é—´
  feedback_updated_at TEXT,               -- æœ€åæ›´æ–°æ—¶é—´
  data_source TEXT DEFAULT 'manual',      -- manual/api/hybrid

  -- å¤–é”®çº¦æŸ
  FOREIGN KEY (post_id) REFERENCES posts(post_id),
  FOREIGN KEY (event_id) REFERENCES events(id),

  -- ç´¢å¼•
  INDEX idx_perf_post (post_id),
  INDEX idx_perf_type (event_type),
  INDEX idx_perf_location (location_category),
  INDEX idx_perf_score (engagement_score)
);
```

**ç¤ºä¾‹æ•°æ®**:
```json
{
  "id": 1,
  "post_id": "post_2025-11-04_1530",
  "event_id": 1234,
  "event_title": "Ferry Building Farmers Market",
  "event_type": "market",
  "event_url": "https://short.io/abc123",
  "location": "Ferry Building Marketplace",
  "location_category": "sanfrancisco",
  "price": "Free",
  "price_category": "free",
  "start_time": "2025-11-09T09:00:00Z",
  "is_weekend": true,
  "is_free": true,
  "is_outdoor": true,
  "is_chinese_relevant": false,

  "shortio_clicks": 45,
  "xiaohongshu_likes": 28,
  "xiaohongshu_favorites": 15,
  "xiaohongshu_comments": 8,
  "xiaohongshu_shares": 3,

  "engagement_score": 380.0,
  "normalized_score": 0.85,

  "feedback_collected_at": "2025-11-11T10:00:00Z",
  "feedback_updated_at": "2025-11-11T10:00:00Z",
  "data_source": "manual"
}
```

---

### 3. æƒé‡è°ƒæ•´å†å²è¡¨ (weight_adjustments)

**ç”¨é€”**: è®°å½•æ¯æ¬¡æƒé‡è°ƒæ•´çš„è¯¦ç»†ä¿¡æ¯ï¼Œç”¨äºå®¡è®¡å’Œå›æ»š

```sql
CREATE TABLE weight_adjustments (
  -- ä¸»é”®
  id INTEGER PRIMARY KEY AUTOINCREMENT,

  -- è°ƒæ•´ä¿¡æ¯
  adjustment_id TEXT UNIQUE NOT NULL,     -- å¦‚: adj_2025-11-11_1200
  adjusted_at TEXT NOT NULL,              -- è°ƒæ•´æ—¶é—´
  adjustment_reason TEXT,                 -- è°ƒæ•´åŸå› 
  adjustment_type TEXT,                   -- auto/manual/hybrid

  -- æ•°æ®åŸºç¡€
  based_on_posts INTEGER,                 -- åŸºäºå¤šå°‘æ¬¡å‘å¸ƒ
  based_on_events INTEGER,                -- åŸºäºå¤šå°‘ä¸ªæ´»åŠ¨
  analysis_period_start TEXT,             -- åˆ†æèµ·å§‹æ—¶é—´
  analysis_period_end TEXT,               -- åˆ†æç»“æŸæ—¶é—´

  -- æ•´ä½“ç»Ÿè®¡
  avg_engagement_score REAL,              -- å¹³å‡å‚ä¸åº¦åˆ†æ•°
  total_clicks INTEGER,                   -- æ€»ç‚¹å‡»æ•°
  total_engagement INTEGER,               -- æ€»äº’åŠ¨æ•°

  -- è°ƒæ•´è¯¦æƒ… (JSONæ ¼å¼å­˜å‚¨)
  adjustments_json TEXT NOT NULL,         -- è¯¦ç»†è°ƒæ•´å†…å®¹

  -- è°ƒæ•´å‰åé…ç½®å¿«ç…§
  config_before TEXT,                     -- è°ƒæ•´å‰çš„å®Œæ•´é…ç½® (JSON)
  config_after TEXT,                      -- è°ƒæ•´åçš„å®Œæ•´é…ç½® (JSON)

  -- å®¡æ‰¹ä¿¡æ¯
  requires_approval BOOLEAN DEFAULT 1,    -- æ˜¯å¦éœ€è¦äººå·¥å®¡æ‰¹
  approved_by TEXT,                       -- å®¡æ‰¹äºº (manual/auto)
  approved_at TEXT,                       -- å®¡æ‰¹æ—¶é—´
  is_applied BOOLEAN DEFAULT 0,           -- æ˜¯å¦å·²åº”ç”¨

  -- æ•ˆæœè¿½è¸ª
  effectiveness_score REAL,               -- è°ƒæ•´åçš„æ•ˆæœè¯„åˆ† (å»¶è¿Ÿæ›´æ–°)

  -- å…ƒæ•°æ®
  created_at TEXT NOT NULL,
  notes TEXT,                             -- å¤‡æ³¨

  -- ç´¢å¼•
  INDEX idx_adj_date (adjusted_at),
  INDEX idx_adj_applied (is_applied)
);
```

**adjustments_json ç»“æ„**:
```json
{
  "eventTypePriority": {
    "market": {
      "old": 10,
      "new": 12,
      "change": "+20%",
      "reason": "å¹³å‡engagement 248.3 (é«˜äºæ•´ä½“58%)"
    },
    "festival": {
      "old": 10,
      "new": 11,
      "change": "+10%",
      "reason": "å¹³å‡engagement 189.2 (é«˜äºæ•´ä½“21%)"
    },
    "music": {
      "old": 4,
      "new": 3,
      "change": "-25%",
      "reason": "å¹³å‡engagement 98.4 (ä½äºæ•´ä½“37%)"
    }
  },

  "locationPriority": {
    "sanfrancisco": { "old": 1.0, "new": 1.0, "change": "0%" }
  },

  "pricePriority": {
    "free": {
      "old": 1.0,
      "new": 1.05,
      "change": "+5%",
      "reason": "å…è´¹æ´»åŠ¨è¡¨ç°ç¨³å®šä¼˜äºä»˜è´¹"
    }
  },

  "timingPriority": {
    "weekend": {
      "old": 1.0,
      "new": 1.1,
      "change": "+10%",
      "reason": "å‘¨æœ«æ´»åŠ¨å‚ä¸åº¦æ˜¾è‘—é«˜äºå·¥ä½œæ—¥"
    }
  }
}
```

**ç¤ºä¾‹æ•°æ®**:
```json
{
  "id": 1,
  "adjustment_id": "adj_2025-11-11_1200",
  "adjusted_at": "2025-11-11T12:00:00Z",
  "adjustment_reason": "åŸºäº4æ¬¡å‘å¸ƒæ•°æ®çš„é¦–æ¬¡æƒé‡ä¼˜åŒ–",
  "adjustment_type": "manual",

  "based_on_posts": 4,
  "based_on_events": 32,
  "analysis_period_start": "2025-10-14",
  "analysis_period_end": "2025-11-11",

  "avg_engagement_score": 156.5,
  "total_clicks": 1250,
  "total_engagement": 5000,

  "adjustments_json": "{ ... }",  // ä¸Šé¢çš„JSON
  "config_before": "{ ... }",
  "config_after": "{ ... }",

  "requires_approval": true,
  "approved_by": "manual",
  "approved_at": "2025-11-11T12:05:00Z",
  "is_applied": true,

  "created_at": "2025-11-11T12:00:00Z",
  "notes": "é¦–æ¬¡è°ƒæ•´ï¼Œä¿å®ˆç­–ç•¥"
}
```

---

### 4. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

```sql
-- é«˜é¢‘æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_perf_post_type ON event_performance(post_id, event_type);
CREATE INDEX idx_perf_score_type ON event_performance(engagement_score DESC, event_type);

-- æ—¶é—´èŒƒå›´æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_posts_published_week ON posts(published_at, week_identifier);

-- åˆ†ææŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_perf_composite ON event_performance(
  event_type,
  location_category,
  price_category,
  engagement_score
);
```

---

## å·¥ä½œæµç¨‹è¯¦è§£

### Phase 1: å‘å¸ƒé˜¶æ®µ (è‡ªåŠ¨è®°å½•)

**è§¦å‘ç‚¹**: `npm run generate-post review_*.json`

```javascript
// åœ¨ generate-post.js ä¸­æ·»åŠ 
async generatePost(events, weekRange) {
  // ... ç°æœ‰çš„ç”Ÿæˆé€»è¾‘ ...

  // [æ–°å¢] åˆ›å»ºå‘å¸ƒè®°å½•
  const postId = `post_${timestamp}`;
  await performanceDB.createPost({
    post_id: postId,
    published_at: new Date().toISOString(),
    week_identifier: weekRange.identifier,
    total_events: events.length,
    review_file_path: reviewFilePath,
    output_file_path: outputPath,
    cover_image_path: coverPath
  });

  // [æ–°å¢] ä¸ºæ¯ä¸ªæ´»åŠ¨åˆ›å»ºåˆå§‹è¡¨ç°è®°å½•
  for (const event of events) {
    await performanceDB.createEventPerformance({
      post_id: postId,
      event_id: event.id,
      event_title: event.title,
      event_type: event.event_type,
      event_url: event.short_url || event.original_url,
      location: event.location,
      location_category: detectLocationCategory(event.location),
      price: event.price,
      price_category: categorizePriceAuto(event.price),
      start_time: event.start_time,
      // ç‰¹å¾æå–
      is_weekend: isWeekend(event.start_time),
      is_free: isFree(event.price),
      is_outdoor: event.tags?.includes('outdoor'),
      is_chinese_relevant: event.chinese_relevant,
      // åˆå§‹åé¦ˆæ•°æ®ä¸º0
      engagement_score: 0
    });
  }

  console.log(`âœ… å‘å¸ƒè®°å½•å·²åˆ›å»º: ${postId}`);
  console.log(`ğŸ“Š ä¸‹æ¬¡è¿è¡Œ 'npm run collect-feedback ${postId}' æ¥æ”¶é›†åé¦ˆæ•°æ®`);
}
```

**è¾“å‡º**:
```
âœ… å†…å®¹ç”Ÿæˆå®Œæˆï¼
ğŸ“„ å‘å¸ƒå†…å®¹: ./output/weekly_events_2025-11-04_1530.txt
ğŸ“± å°é¢å›¾ç‰‡: ./output/covers/cover_2025-11-04_153025_123.png

ğŸ“Š å‘å¸ƒè®°å½•å·²åˆ›å»º: post_2025-11-04_1530
ğŸ“‹ åŒ…å« 8 ä¸ªæ´»åŠ¨ï¼Œæ•°æ®å·²ä¿å­˜åˆ°æ•°æ®åº“

ğŸ’¡ ä¸‹ä¸€æ­¥:
  1. å°†å†…å®¹å‘å¸ƒåˆ°å°çº¢ä¹¦
  2. ç­‰å¾… 2-3 å¤©æ”¶é›†æ•°æ®
  3. è¿è¡Œ 'npm run collect-feedback post_2025-11-04_1530' æ”¶é›†åé¦ˆ
```

---

### Phase 2: åé¦ˆæ”¶é›†é˜¶æ®µ (æ‰‹åŠ¨/è‡ªåŠ¨)

**å‘½ä»¤**: `npm run collect-feedback <post_id>`

#### 2.1 äº¤äº’å¼æ•°æ®æ”¶é›†

```bash
$ npm run collect-feedback post_2025-11-04_1530

ğŸ‰ åé¦ˆæ”¶é›†å™¨ - Bay Area Events

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ å‘å¸ƒä¿¡æ¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å‘å¸ƒID:    post_2025-11-04_1530
å‘å¸ƒæ—¶é—´:  2025-11-04 15:30
å‘¨èŒƒå›´:    11/05 - 11/09
åŒ…å«æ´»åŠ¨:  8ä¸ª

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š Step 1: å°çº¢ä¹¦æ•´ä½“æ•°æ®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·è¾“å…¥å¸–å­çš„æ•´ä½“äº’åŠ¨æ•°æ® (å¯ä»¥ä»å°çº¢ä¹¦APPæŸ¥çœ‹):

ğŸ‘ æ€»ç‚¹èµæ•°: 150
â­ æ€»æ”¶è—æ•°: 80
ğŸ’¬ æ€»è¯„è®ºæ•°: 25
ğŸ”„ æ€»åˆ†äº«æ•°: 10

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”— Step 2: Short.io ç‚¹å‡»æ•°æ®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç°åœ¨éœ€è¦ä¸ºæ¯ä¸ªæ´»åŠ¨è¾“å…¥ Short.io çš„ç‚¹å‡»æ•°æ®ã€‚

ğŸ’¡ æç¤º:
  1. ç™»å½• Short.io dashboard
  2. æŸ¥æ‰¾æœ¬æ¬¡å‘å¸ƒåˆ›å»ºçš„çŸ­é“¾æ¥
  3. å¤åˆ¶æ¯ä¸ªé“¾æ¥çš„ç‚¹å‡»æ¬¡æ•°

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ´»åŠ¨ 1/8                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ ‡é¢˜: Ferry Building Farmers Market     â”‚
â”‚ ç±»å‹: market | åœ°ç‚¹: SF | ä»·æ ¼: Free   â”‚
â”‚ é“¾æ¥: https://short.io/abc123           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Short.io ç‚¹å‡»æ¬¡æ•°: 45

[å¯é€‰] å¦‚æœè¿™ä¸ªæ´»åŠ¨æœ‰ç‰¹åˆ«å¤šçš„è¯„è®º/ç‚¹èµï¼Œ
å¯ä»¥ä¼°ç®—å æ€»æ•°çš„æ¯”ä¾‹ (0-100%)ï¼Œç•™ç©ºåˆ™è‡ªåŠ¨æŒ‰æ¯”ä¾‹åˆ†é…:
  - è¯„è®ºå æ¯” (%): 30
  - ç‚¹èµå æ¯” (%): 25
  - æ”¶è—å æ¯” (%): 28

âœ… æ´»åŠ¨ 1 æ•°æ®å·²ä¿å­˜
  - ç‚¹å‡»: 45
  - è¯„è®º: 7 (30% of 25)
  - ç‚¹èµ: 37 (25% of 150)
  - æ”¶è—: 22 (28% of 80)
  - Engagement Score: 380.0

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ´»åŠ¨ 2/8                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ ‡é¢˜: SF Fall Cider Fest                â”‚
â”‚ ç±»å‹: festival | åœ°ç‚¹: SF | ä»·æ ¼: $55  â”‚
â”‚ é“¾æ¥: https://short.io/def456           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Short.io ç‚¹å‡»æ¬¡æ•°: 28
è¯„è®ºå æ¯” (%): [å›è½¦ä½¿ç”¨è‡ªåŠ¨åˆ†é…]
ç‚¹èµå æ¯” (%): [å›è½¦]
æ”¶è—å æ¯” (%): [å›è½¦]

âœ… æ´»åŠ¨ 2 æ•°æ®å·²ä¿å­˜ (ä½¿ç”¨è‡ªåŠ¨åˆ†é…)
  - ç‚¹å‡»: 28
  - è¯„è®º: 3
  - ç‚¹èµ: 18
  - æ”¶è—: 10
  - Engagement Score: 245.0

... (ç»§ç»­å…¶ä»–æ´»åŠ¨)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… æ•°æ®æ”¶é›†å®Œæˆï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ€»ç»“:
  - 8ä¸ªæ´»åŠ¨å…¨éƒ¨å®Œæˆ
  - æ€»ç‚¹å‡»æ•°: 245
  - å¹³å‡ Engagement Score: 212.5

æ•°æ®å·²ä¿å­˜åˆ°æ•°æ®åº“: event_performance è¡¨

ğŸ’¡ ä¸‹ä¸€æ­¥:
  è¿è¡Œ 'npm run analyze-feedback' æŸ¥çœ‹åˆ†ææŠ¥å‘Š
```

#### 2.2 æ•°æ®éªŒè¯

ç³»ç»Ÿè‡ªåŠ¨éªŒè¯ï¼š
- âœ… æ‰€æœ‰æ´»åŠ¨éƒ½æœ‰ç‚¹å‡»æ•°æ®
- âœ… ç‚¹å‡»æ•°åˆç† (ä¸ä¸ºè´Ÿæ•°ï¼Œä¸å¼‚å¸¸å¤§)
- âœ… å„æ´»åŠ¨çš„äº’åŠ¨æ•°æ®æ€»å’Œ â‰ˆ æ€»äº’åŠ¨æ•° (å…è®¸ Â±20% è¯¯å·®)
- âš ï¸ å¦‚æœæ•°æ®å¼‚å¸¸ï¼Œç»™å‡ºè­¦å‘Šä½†å…è®¸ä¿å­˜

---

### Phase 3: åé¦ˆåˆ†æé˜¶æ®µ

**å‘½ä»¤**: `npm run analyze-feedback [--posts N] [--export]`

**å‚æ•°**:
- `--posts N`: åˆ†ææœ€è¿‘ N æ¬¡å‘å¸ƒ (é»˜è®¤4æ¬¡)
- `--export`: å¯¼å‡ºåˆ†ææŠ¥å‘Šåˆ°æ–‡ä»¶

#### 3.1 æ•°æ®åˆ†ææµç¨‹

```javascript
// analyze-feedback.js ä¸»æµç¨‹

async analyze() {
  // 1. è¯»å–æ•°æ®
  const posts = await performanceDB.getRecentPosts(N);
  const events = await performanceDB.getEventsByPosts(posts);

  // 2. è®¡ç®— Engagement Score
  for (const event of events) {
    event.engagement_score = calculateEngagementScore(event);
  }

  // 3. å¤šç»´åº¦åˆ†æ
  const analysis = {
    overall: analyzeOverall(events),
    byType: analyzeByEventType(events),
    byLocation: analyzeByLocation(events),
    byPrice: analyzeByPrice(events),
    byTiming: analyzeByTiming(events),
    byFeatures: analyzeByFeatures(events)
  };

  // 4. ç”Ÿæˆæƒé‡è°ƒæ•´å»ºè®®
  const recommendations = generateRecommendations(analysis);

  // 5. ç”ŸæˆæŠ¥å‘Š
  const report = {
    report_id: `report_${timestamp}`,
    generated_at: new Date().toISOString(),
    analysis_period: { from, to },
    based_on: { posts: N, events: events.length },
    analysis,
    recommendations,
    confidence_level: calculateConfidence(N, events.length)
  };

  // 6. ä¿å­˜æŠ¥å‘Š
  await saveReport(report);

  // 7. æ˜¾ç¤ºæŠ¥å‘Š
  displayReport(report);

  return report;
}
```

#### 3.2 åˆ†ææŠ¥å‘Šè¾“å‡º

```bash
$ npm run analyze-feedback --posts 4

ğŸ“Š åé¦ˆåˆ†ææŠ¥å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æŠ¥å‘ŠID: report_2025-11-11_1200
ç”Ÿæˆæ—¶é—´: 2025-11-11 12:00
åˆ†æå‘¨æœŸ: 2025-10-14 è‡³ 2025-11-11
æ•°æ®åŸºç¡€: 4æ¬¡å‘å¸ƒï¼Œå…±32ä¸ªæ´»åŠ¨

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ˆ æ•´ä½“è¡¨ç°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ€»ç‚¹å‡»æ•°:     1,250
æ€»ç‚¹èµæ•°:     480
æ€»æ”¶è—æ•°:     320
æ€»è¯„è®ºæ•°:     95
æ€»åˆ†äº«æ•°:     42

å¹³å‡æ¯æ´»åŠ¨:
  - ç‚¹å‡»: 39
  - Engagement Score: 156.5

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ æ´»åŠ¨ç±»å‹è¡¨ç°æ’å
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç±»å‹     â”‚ æ•°é‡  â”‚ å¹³å‡åˆ†æ•° â”‚ vs å¹³å‡   â”‚ è¶‹åŠ¿     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ market   â”‚  10   â”‚  248.3   â”‚  +58%     â”‚ â­â­â­  â”‚
â”‚ festival â”‚   8   â”‚  189.2   â”‚  +21%     â”‚ â­â­    â”‚
â”‚ food     â”‚   6   â”‚  145.6   â”‚   -7%     â”‚ â†’       â”‚
â”‚ music    â”‚   5   â”‚   98.4   â”‚  -37%     â”‚ â†“â†“      â”‚
â”‚ art      â”‚   3   â”‚   87.1   â”‚  -44%     â”‚ â†“â†“      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š è¯¦ç»†æ•°æ® - Market ç±»æ´»åŠ¨:
  - æœ€ä½³: Ferry Building Farmers Market (380åˆ†)
  - æœ€å·®: Alameda Flea Market (152åˆ†)
  - ä¸­ä½æ•°: 245åˆ†
  - æ ‡å‡†å·®: 68.2 (è¡¨ç°ç¨³å®š)

ğŸ’¡ å»ºè®®:
  âœ… æé«˜ market æƒé‡ (+20%)    ç½®ä¿¡åº¦: é«˜
  âœ… æé«˜ festival æƒé‡ (+10%)  ç½®ä¿¡åº¦: ä¸­
  âš ï¸  é™ä½ music æƒé‡ (-10%)    ç½®ä¿¡åº¦: ä¸­ (æ ·æœ¬è¾ƒå°)
  âš ï¸  é™ä½ art æƒé‡ (-10%)      ç½®ä¿¡åº¦: ä½ (æ ·æœ¬å¤ªå°)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ åœ°ç†ä½ç½®è¡¨ç°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒºåŸŸ         â”‚ æ•°é‡  â”‚ å¹³å‡åˆ†æ•° â”‚ vs å¹³å‡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ San Franciscoâ”‚  18   â”‚  172.4   â”‚  +10%     â”‚
â”‚ å—æ¹¾         â”‚   8   â”‚  145.2   â”‚   -7%     â”‚
â”‚ åŠå²›         â”‚   4   â”‚  128.6   â”‚  -18%     â”‚
â”‚ ä¸œæ¹¾         â”‚   2   â”‚   95.3   â”‚  -39%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ å»ºè®®: ä¿æŒå½“å‰åœ°ç†ä½ç½®æƒé‡ (å·®å¼‚ä¸æ˜¾è‘—)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’° ä»·æ ¼åå¥½åˆ†æ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»·æ ¼åŒºé—´ â”‚ æ•°é‡  â”‚ å¹³å‡åˆ†æ•° â”‚ vs å¹³å‡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Free     â”‚  20   â”‚  168.9   â”‚   +8%     â”‚
â”‚ $1-50    â”‚   8   â”‚  142.1   â”‚   -9%     â”‚
â”‚ $50+     â”‚   4   â”‚   98.7   â”‚  -37%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ å»ºè®®: è½»å¾®æé«˜å…è´¹æ´»åŠ¨æƒé‡ (+5%)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â° æ—¶é—´åå¥½åˆ†æ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å‘¨æœ« vs å·¥ä½œæ—¥:
  - å‘¨æœ« (24ä¸ª):   å¹³å‡ 178.2  â­
  - å·¥ä½œæ—¥ (8ä¸ª):  å¹³å‡ 112.1  â†“

ç™½å¤© vs æ™šä¸Š:
  - ç™½å¤© (20ä¸ª):   å¹³å‡ 165.3  â­
  - æ™šä¸Š (12ä¸ª):   å¹³å‡ 142.8  â†’

ğŸ’¡ å»ºè®®:
  - ä¼˜å…ˆé€‰æ‹©å‘¨æœ«æ´»åŠ¨ (æé«˜å‘¨æœ«æƒé‡ +10%)
  - ç™½å¤©æ´»åŠ¨ç•¥ä¼˜ï¼Œä½†å·®å¼‚ä¸å¤§

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ·ï¸  ç‰¹æ®Šç‰¹å¾åˆ†æ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Chinese Relevant:
  - æ˜¯ (3ä¸ª):  å¹³å‡ 165.2
  - å¦ (29ä¸ª): å¹³å‡ 155.8
  ç»“è®º: å·®å¼‚ä¸æ˜¾è‘—

Outdoor:
  - æ˜¯ (15ä¸ª): å¹³å‡ 185.6  â­
  - å¦ (17ä¸ª): å¹³å‡ 130.2  â†“
  ç»“è®º: æˆ·å¤–æ´»åŠ¨æ˜æ˜¾æ›´å—æ¬¢è¿

Family Friendly:
  - æ˜¯ (12ä¸ª): å¹³å‡ 172.4  â­
  - å¦ (20ä¸ª): å¹³å‡ 147.3  â†’
  ç»“è®º: å®¶åº­å‹å¥½æ´»åŠ¨ç•¥ä¼˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ æƒé‡è°ƒæ•´å»ºè®®æ±‡æ€»
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ´»åŠ¨ç±»å‹æƒé‡:
  market:   10 â†’ 12  (+20%) â­ é«˜ç½®ä¿¡åº¦
  festival: 10 â†’ 11  (+10%) â­ ä¸­ç½®ä¿¡åº¦
  food:      6 â†’  6  (ä¸å˜)
  music:     4 â†’  3  (-25%) âš ï¸  ä¸­ç½®ä¿¡åº¦ï¼Œæ ·æœ¬è¾ƒå°
  art:       5 â†’  4  (-20%) âš ï¸  ä½ç½®ä¿¡åº¦ï¼Œæ ·æœ¬å¤ªå°

æ—¶é—´åå¥½æƒé‡:
  weekend:  1.0 â†’ 1.1  (+10%) â­ é«˜ç½®ä¿¡åº¦
  weekday:  1.0 â†’ 0.95 ( -5%)

ä»·æ ¼åå¥½æƒé‡:
  free:     1.0 â†’ 1.05 (+5%)  â­ ä¸­ç½®ä¿¡åº¦

ç‰¹å¾æƒé‡ (æ–°å¢):
  outdoor:  1.0 â†’ 1.15 (+15%) â­ é«˜ç½®ä¿¡åº¦

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ç½®ä¿¡åº¦è¯„ä¼°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ•´ä½“ç½®ä¿¡åº¦: ä¸­ (Medium)

åŸå› :
  âœ… å‘å¸ƒæ¬¡æ•°å……è¶³ (4æ¬¡ â‰¥ æœ€å°è¦æ±‚4æ¬¡)
  âœ… æ€»æ´»åŠ¨æ•°å……è¶³ (32ä¸ª â‰¥ æœ€å°è¦æ±‚30ä¸ª)
  âš ï¸  éƒ¨åˆ†ç±»å‹æ ·æœ¬é‡è¾ƒå° (artåªæœ‰3ä¸ª)
  âš ï¸  æ—¶é—´è·¨åº¦è¾ƒçŸ­ (28å¤©ï¼Œå»ºè®®â‰¥60å¤©æ›´ç¨³å¥)

å»ºè®®:
  - å¯ä»¥åº”ç”¨ç½®ä¿¡åº¦é«˜çš„è°ƒæ•´ (market, festival, outdoor)
  - è°¨æ…åº”ç”¨ç½®ä¿¡åº¦ä½çš„è°ƒæ•´ (art)
  - å†æ”¶é›†2-4æ¬¡æ•°æ®åå¯æé«˜è°ƒæ•´å¹…åº¦

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“„ æŠ¥å‘Šå·²ä¿å­˜: ./output/reports/feedback_report_2025-11-11.json

ğŸ’¡ ä¸‹ä¸€æ­¥:
  - æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š: cat ./output/reports/feedback_report_2025-11-11.json
  - åº”ç”¨æƒé‡è°ƒæ•´: npm run adjust-weights
  - å¯¼å‡ºæ•°æ®: npm run export-feedback
```

---

### Phase 4: æƒé‡è°ƒæ•´é˜¶æ®µ

**å‘½ä»¤**: `npm run adjust-weights [--report-id <id>] [--auto] [--dry-run]`

**å‚æ•°**:
- `--report-id`: ä½¿ç”¨ç‰¹å®šåˆ†ææŠ¥å‘Š (é»˜è®¤ä½¿ç”¨æœ€æ–°)
- `--auto`: è‡ªåŠ¨åº”ç”¨è°ƒæ•´ (è·³è¿‡äººå·¥ç¡®è®¤)
- `--dry-run`: åªé¢„è§ˆä¸å®é™…åº”ç”¨

#### 4.1 äº¤äº’å¼æƒé‡è°ƒæ•´

```bash
$ npm run adjust-weights

âš™ï¸  æƒé‡è°ƒæ•´å™¨ - åŸºäºç”¨æˆ·åé¦ˆè‡ªåŠ¨ä¼˜åŒ–

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š åˆ†ææŠ¥å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä½¿ç”¨æŠ¥å‘Š: report_2025-11-11_1200
åŸºäºæ•°æ®: 4æ¬¡å‘å¸ƒ, 32ä¸ªæ´»åŠ¨
åˆ†æå‘¨æœŸ: 2025-10-14 è‡³ 2025-11-11
æ•´ä½“ç½®ä¿¡åº¦: ä¸­ (Medium)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ å»ºè®®çš„æƒé‡è°ƒæ•´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ´»åŠ¨ç±»å‹æƒé‡ (eventTypePriority)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  market:   10 â†’ 12  (+20%) â­ é«˜ç½®ä¿¡åº¦             â”‚
â”‚    ç†ç”±: å¹³å‡engagement 248.3 (é«˜äºæ•´ä½“58%)       â”‚
â”‚    å½±å“: ä¸‹æ¬¡æŠ“å–å°†ä¼˜å…ˆæ¨èæ›´å¤šmarketç±»æ´»åŠ¨        â”‚
â”‚                                                    â”‚
â”‚  festival: 10 â†’ 11  (+10%) â­ ä¸­ç½®ä¿¡åº¦             â”‚
â”‚    ç†ç”±: å¹³å‡engagement 189.2 (é«˜äºæ•´ä½“21%)       â”‚
â”‚                                                    â”‚
â”‚  music:     4 â†’  3  (-25%) âš ï¸  ä¸­ç½®ä¿¡åº¦           â”‚
â”‚    ç†ç”±: å¹³å‡engagement 98.4 (ä½äºæ•´ä½“37%)        â”‚
â”‚    è­¦å‘Š: æ ·æœ¬é‡è¾ƒå° (5ä¸ª)ï¼Œå»ºè®®å†è§‚å¯Ÿ             â”‚
â”‚                                                    â”‚
â”‚  art:       5 â†’  4  (-20%) âš ï¸  ä½ç½®ä¿¡åº¦           â”‚
â”‚    ç†ç”±: å¹³å‡engagement 87.1 (ä½äºæ•´ä½“44%)        â”‚
â”‚    è­¦å‘Š: æ ·æœ¬é‡å¤ªå° (3ä¸ª)ï¼Œè°¨æ…è°ƒæ•´               â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ˜¯å¦åº”ç”¨æ´»åŠ¨ç±»å‹è°ƒæ•´? (y/n/c=è‡ªå®šä¹‰): y

  âœ… market è°ƒæ•´å·²ç¡®è®¤
  âœ… festival è°ƒæ•´å·²ç¡®è®¤

  âš ï¸  music è°ƒæ•´: æ ·æœ¬é‡è¾ƒå°ï¼Œç¡®è®¤é™ä½æƒé‡? (y/n): y
  âœ… music è°ƒæ•´å·²ç¡®è®¤

  âš ï¸  art è°ƒæ•´: æ ·æœ¬é‡å¤ªå°ï¼Œå»ºè®®è·³è¿‡ã€‚ä»è¦è°ƒæ•´? (y/n): n
  â­ï¸  art è°ƒæ•´å·²è·³è¿‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ—¶é—´åå¥½æƒé‡ (timingPriority)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  weekend:  1.0 â†’ 1.1  (+10%) â­ é«˜ç½®ä¿¡åº¦           â”‚
â”‚    ç†ç”±: å‘¨æœ«æ´»åŠ¨å¹³å‡178.2 vs å·¥ä½œæ—¥112.1        â”‚
â”‚    å½±å“: å‘¨æœ«æ´»åŠ¨æ’åå°†æå‡çº¦10%                   â”‚
â”‚                                                    â”‚
â”‚  weekday:  1.0 â†’ 0.95 (-5%)                       â”‚
â”‚    ç†ç”±: å·¥ä½œæ—¥æ´»åŠ¨è¡¨ç°ç•¥ä½äºå‘¨æœ«                  â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ˜¯å¦åº”ç”¨æ—¶é—´åå¥½è°ƒæ•´? (y/n): y
  âœ… æ—¶é—´åå¥½è°ƒæ•´å·²ç¡®è®¤

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ä»·æ ¼åå¥½æƒé‡ (pricePriority)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  free:     1.0 â†’ 1.05 (+5%) â­ ä¸­ç½®ä¿¡åº¦            â”‚
â”‚    ç†ç”±: å…è´¹æ´»åŠ¨å¹³å‡168.9 vs ä»˜è´¹æ´»åŠ¨120.4       â”‚
â”‚    å½±å“: å…è´¹æ´»åŠ¨æ’åå°†è½»å¾®æå‡                    â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ˜¯å¦åº”ç”¨ä»·æ ¼åå¥½è°ƒæ•´? (y/n): y
  âœ… ä»·æ ¼åå¥½è°ƒæ•´å·²ç¡®è®¤

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ç‰¹å¾æƒé‡ (featurePriority) [æ–°å¢]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  outdoor:  1.0 â†’ 1.15 (+15%) â­ é«˜ç½®ä¿¡åº¦           â”‚
â”‚    ç†ç”±: æˆ·å¤–æ´»åŠ¨æ˜æ˜¾æ›´å—æ¬¢è¿ (185.6 vs 130.2)   â”‚
â”‚    å½±å“: æˆ·å¤–æ´»åŠ¨å°†è·å¾—æ˜¾è‘—åŠ åˆ†                    â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ˜¯å¦åº”ç”¨ç‰¹å¾æƒé‡è°ƒæ•´? (y/n): y
  âœ… ç‰¹å¾æƒé‡è°ƒæ•´å·²ç¡®è®¤

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ è°ƒæ•´æ±‡æ€»
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å°†åº”ç”¨çš„è°ƒæ•´:
  âœ… eventTypePriority.market: 10 â†’ 12
  âœ… eventTypePriority.festival: 10 â†’ 11
  âœ… eventTypePriority.music: 4 â†’ 3
  â­ï¸  eventTypePriority.art: è·³è¿‡ (æ ·æœ¬å¤ªå°)
  âœ… timingPriority.weekend: 1.0 â†’ 1.1
  âœ… timingPriority.weekday: 1.0 â†’ 0.95
  âœ… pricePriority.free: 1.0 â†’ 1.05
  âœ… featurePriority.outdoor: 1.0 â†’ 1.15

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸  æœ€ç»ˆç¡®è®¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¿™äº›è°ƒæ•´å°†:
  1. ä¿®æ”¹ config-dynamic.json
  2. å½±å“ä¸‹æ¬¡ 'npm run scrape' çš„æ´»åŠ¨æ’åº
  3. è®°å½•åˆ° weight_adjustments è¡¨

ç¡®è®¤åº”ç”¨è¿™äº›è°ƒæ•´? (y/n): y

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… è°ƒæ•´å®Œæˆï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… config-dynamic.json å·²æ›´æ–°
âœ… è°ƒæ•´å†å²å·²ä¿å­˜: adj_2025-11-11_1200
âœ… é…ç½®å¤‡ä»½å·²åˆ›å»º: config-dynamic.backup.json

ğŸ“„ è°ƒæ•´è¯¦æƒ…: ./output/reports/adjustment_2025-11-11_1200.json

ğŸ”„ ä¸‹æ¬¡è¿è¡Œ 'npm run scrape' æ—¶å°†è‡ªåŠ¨åº”ç”¨æ–°æƒé‡

ğŸ’¡ æç¤º:
  - æŸ¥çœ‹å½“å‰æƒé‡: npm run weights:view
  - å›æ»šè°ƒæ•´: npm run weights:rollback adj_2025-11-11_1200
  - é‡ç½®ä¸ºé»˜è®¤: npm run weights:reset
```

#### 4.2 config-dynamic.json ç»“æ„

```json
{
  "version": "1.0.0",
  "last_updated": "2025-11-11T12:00:00Z",
  "adjustment_id": "adj_2025-11-11_1200",
  "based_on_report": "report_2025-11-11_1200",
  "based_on_data": {
    "posts": 4,
    "events": 32,
    "period": "2025-10-14 to 2025-11-11"
  },

  "eventTypePriority": {
    "market": 12,
    "fair": 10,
    "festival": 11,
    "free": 9,
    "food": 6,
    "music": 3,
    "art": 5,
    "tech": 5,
    "default": 3
  },

  "locationPriority": {
    "sanfrancisco": 1.0,
    "southbay": 0.85,
    "peninsula": 0.8,
    "eastbay": 0.6
  },

  "pricePriority": {
    "free": 1.05,
    "paid": 1.0,
    "expensive": 0.9
  },

  "timingPriority": {
    "weekend": 1.1,
    "weekday": 0.95,
    "daytime": 1.0,
    "evening": 1.0
  },

  "featurePriority": {
    "outdoor": 1.15,
    "chinese_relevant": 1.0,
    "family_friendly": 1.05
  },

  "metadata": {
    "created_at": "2025-11-11T12:00:00Z",
    "created_by": "manual",
    "notes": "é¦–æ¬¡æƒé‡è°ƒæ•´ï¼ŒåŸºäº4æ¬¡å‘å¸ƒæ•°æ®",
    "confidence_level": "medium"
  },

  "adjustment_history": [
    {
      "adjustment_id": "adj_2025-11-11_1200",
      "date": "2025-11-11T12:00:00Z",
      "changes_summary": "market +20%, festival +10%, music -25%, outdoor +15%",
      "reason": "åŸºäº4æ¬¡å‘å¸ƒæ•°æ®ä¼˜åŒ–"
    }
  ]
}
```

---

### Phase 5: åº”ç”¨æ–°æƒé‡ (ä¸‹æ¬¡æŠ“å–)

**å‘½ä»¤**: `npm run scrape`

#### 5.1 ä¿®æ”¹ scrape-events.js

```javascript
// scrape-events.js

const ConfigManager = require('./utils/config-manager');

class EventScrapeOrchestrator {
  constructor() {
    // [ä¿®æ”¹] ä½¿ç”¨é…ç½®ç®¡ç†å™¨è¯»å–åŠ¨æ€é…ç½®
    this.configManager = new ConfigManager();
    this.config = this.configManager.getConfig(); // ä¼˜å…ˆè¯»å– config-dynamic.json

    // ... ç°æœ‰ä»£ç  ...
  }

  async run() {
    console.log('ğŸ•·ï¸  å¼€å§‹æŠ“å–æ¹¾åŒºæ´»åŠ¨...\n');

    // [æ–°å¢] æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„æƒé‡é…ç½®
    this.displayCurrentWeights();

    // ... ç°æœ‰æŠ“å–é€»è¾‘ ...
  }

  displayCurrentWeights() {
    const { source, config } = this.config;

    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    console.log('âš™ï¸  å½“å‰æƒé‡é…ç½®');
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');

    if (source === 'dynamic') {
      console.log('ğŸ“Š ä½¿ç”¨åŠ¨æ€æƒé‡ (åŸºäºåé¦ˆä¼˜åŒ–)');
      console.log(`   è°ƒæ•´ID: ${config.adjustment_id}`);
      console.log(`   æ›´æ–°æ—¶é—´: ${config.last_updated}`);
      console.log(`   åŸºäºæ•°æ®: ${config.based_on_data.posts}æ¬¡å‘å¸ƒ, ${config.based_on_data.events}ä¸ªæ´»åŠ¨`);
      console.log('');
      console.log('æ´»åŠ¨ç±»å‹æƒé‡:');
      Object.entries(config.eventTypePriority)
        .filter(([k]) => ['market', 'festival', 'food', 'music', 'art'].includes(k))
        .forEach(([type, weight]) => {
          const defaultWeight = this.configManager.getDefaultWeight('eventTypePriority', type);
          const change = weight - defaultWeight;
          const indicator = change > 0 ? 'â¬†ï¸' : change < 0 ? 'â¬‡ï¸' : 'â†’';
          console.log(`   ${type.padEnd(10)} ${weight} ${indicator} ${change > 0 ? '+' : ''}${change}`);
        });
    } else {
      console.log('ğŸ“‹ ä½¿ç”¨é»˜è®¤æƒé‡ (config.js)');
      console.log('ğŸ’¡ è¿è¡Œåé¦ˆåˆ†æåå¯å¯ç”¨åŠ¨æ€æƒé‡');
    }

    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n');
  }
}
```

#### 5.2 è¾“å‡ºç¤ºä¾‹

```bash
$ npm run scrape

ğŸ•·ï¸  å¼€å§‹æŠ“å–æ¹¾åŒºæ´»åŠ¨...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš™ï¸  å½“å‰æƒé‡é…ç½®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ä½¿ç”¨åŠ¨æ€æƒé‡ (åŸºäºåé¦ˆä¼˜åŒ–)
   è°ƒæ•´ID: adj_2025-11-11_1200
   æ›´æ–°æ—¶é—´: 2025-11-11T12:00:00Z
   åŸºäºæ•°æ®: 4æ¬¡å‘å¸ƒ, 32ä¸ªæ´»åŠ¨

æ´»åŠ¨ç±»å‹æƒé‡:
   market     12 â¬†ï¸ +2
   festival   11 â¬†ï¸ +1
   food        6 â†’ 0
   music       3 â¬‡ï¸ -1
   art         5 â†’ 0

ç‰¹å¾æƒé‡:
   outdoor    1.15 â¬†ï¸ +0.15
   weekend    1.1  â¬†ï¸ +0.1
   free       1.05 â¬†ï¸ +0.05
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Eventbrite] å¼€å§‹æŠ“å–...
[Eventbrite] æ‰¾åˆ° 45 ä¸ªæ´»åŠ¨

... (æŠ“å–è¿‡ç¨‹)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š æ´»åŠ¨åˆ†ç±»å’Œæ’åº (åº”ç”¨åŠ¨æ€æƒé‡)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Top 10 å€™é€‰æ´»åŠ¨:
  1. SF Street Food Festival (score: 13.2) [market, outdoor, weekend, free]
     - åŸºç¡€åˆ†: 12 (marketæƒé‡)
     - åŠ æˆ: +1.15 (outdoor) +1.1 (weekend) +1.05 (free)

  2. Ferry Building Farmers Market (score: 12.8) [market, outdoor]
  3. Bay Area Renaissance Faire (score: 11.9) [festival, outdoor, weekend]
  ...

38. Jazz Night at SFJAZZ (score: 3.8) [music, evening]
39. Contemporary Art Show (score: 3.5) [art, indoor]
40. Classical Concert Series (score: 3.2) [music, evening]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å¯ä»¥çœ‹åˆ°:
  - Market ç±»æ´»åŠ¨å æ®å‰åˆ— (æƒé‡12 â†’ é«˜åˆ†)
  - Outdoor + Weekend æ´»åŠ¨è·å¾—å¤šé‡åŠ æˆ
  - Music/Art ç±»æ´»åŠ¨æ’åé å (æƒé‡é™ä½)

âœ… å®¡æ ¸æ–‡ä»¶å·²ç”Ÿæˆ: ./output/review_2025-11-18_1200.json
```

---

## åé¦ˆæŒ‡æ ‡ä½“ç³»

### Engagement Score è®¡ç®—å…¬å¼

#### åŸºç¡€å…¬å¼ (v1.0)

```javascript
function calculateEngagementScore(event) {
  const {
    shortio_clicks,
    xiaohongshu_likes,
    xiaohongshu_favorites,
    xiaohongshu_comments,
    xiaohongshu_shares
  } = event;

  // æƒé‡ç³»æ•°
  const WEIGHTS = {
    CLICK: 5.0,       // Short.io ç‚¹å‡» - æœ€é«˜æƒé‡ (å®é™…è¡ŒåŠ¨)
    COMMENT: 3.0,     // è¯„è®º - é«˜è´¨é‡äº’åŠ¨
    LIKE: 2.0,        // ç‚¹èµ - è½»åº¦è®¤å¯
    FAVORITE: 2.0,    // æ”¶è— - è½»åº¦è®¤å¯
    SHARE: 4.0        // åˆ†äº« - å¼ºä¼ æ’­åŠ›
  };

  const score =
    (shortio_clicks || 0) * WEIGHTS.CLICK +
    (xiaohongshu_comments || 0) * WEIGHTS.COMMENT +
    (xiaohongshu_likes || 0) * WEIGHTS.LIKE +
    (xiaohongshu_favorites || 0) * WEIGHTS.FAVORITE +
    (xiaohongshu_shares || 0) * WEIGHTS.SHARE;

  return score;
}
```

**æƒé‡è¯´æ˜**:
- **Short.io ç‚¹å‡» (5.0)**: ç”¨æˆ·çœŸçš„ç‚¹å‡»é“¾æ¥æŸ¥çœ‹è¯¦æƒ…ï¼Œè¯´æ˜å¼ºæ„æ„¿
- **åˆ†äº« (4.0)**: æ„¿æ„æ¨èç»™æœ‹å‹ï¼Œä¼ æ’­ä»·å€¼é«˜
- **è¯„è®º (3.0)**: æ·±åº¦å‚ä¸ï¼Œç•™è¨€äº’åŠ¨
- **ç‚¹èµ (2.0)**: è½»åº¦è®¤å¯ï¼Œæˆæœ¬ä½
- **æ”¶è— (2.0)**: ä¿å­˜å¤‡ç”¨ï¼Œæ„æ„¿ä¸­ç­‰

#### å½’ä¸€åŒ–åˆ†æ•° (v1.1 - æœªæ¥)

```javascript
function calculateNormalizedScore(event, allEvents) {
  const rawScore = calculateEngagementScore(event);

  // è®¡ç®—æ‰€æœ‰æ´»åŠ¨çš„åˆ†æ•°åˆ†å¸ƒ
  const scores = allEvents.map(e => calculateEngagementScore(e));
  const mean = average(scores);
  const stdDev = standardDeviation(scores);

  // Z-score å½’ä¸€åŒ–
  const zScore = (rawScore - mean) / stdDev;

  // æ˜ å°„åˆ° 0-1 åŒºé—´ (ä½¿ç”¨ sigmoid)
  const normalizedScore = 1 / (1 + Math.exp(-zScore));

  return normalizedScore;
}
```

---

### æŒ‡æ ‡é‡‡é›†æ–¹å¼å¯¹æ¯”

| æŒ‡æ ‡ | MVPæ–¹å¼ | æœªæ¥æ–¹å¼ | ä¼˜å…ˆçº§ |
|------|---------|----------|--------|
| Short.io ç‚¹å‡» | æ‰‹åŠ¨ä»dashboardå¤åˆ¶ | Short.io APIè‡ªåŠ¨é‡‡é›† | â­â­â­ æœ€é«˜ |
| å°çº¢ä¹¦ç‚¹èµ | æ‰‹åŠ¨ä»APPæŸ¥çœ‹è¾“å…¥ | å°çº¢ä¹¦APIè‡ªåŠ¨è·å– | â­â­ é«˜ |
| å°çº¢ä¹¦æ”¶è— | æ‰‹åŠ¨ä»APPæŸ¥çœ‹è¾“å…¥ | å°çº¢ä¹¦APIè‡ªåŠ¨è·å– | â­â­ é«˜ |
| å°çº¢ä¹¦è¯„è®º | æ‰‹åŠ¨ä»APPæŸ¥çœ‹è¾“å…¥ | å°çº¢ä¹¦APIè‡ªåŠ¨è·å– | â­â­â­ æœ€é«˜ |
| å°çº¢ä¹¦åˆ†äº« | æ‰‹åŠ¨ä»APPæŸ¥çœ‹è¾“å…¥ | å°çº¢ä¹¦APIè‡ªåŠ¨è·å– | â­ ä¸­ |
| å®é™…å‚åŠ ç‡ | âŒ æš‚æ—  | é—®å·è°ƒæŸ¥/è·Ÿè¸ªé“¾æ¥ | â­ ä½ (é•¿æœŸ) |

---

## æƒé‡è°ƒæ•´ç®—æ³•

### æ ¸å¿ƒç®—æ³•æµç¨‹

```javascript
// æƒé‡è°ƒæ•´ç®—æ³•ä¼ªä»£ç 

function generateRecommendations(analysis, config) {
  const recommendations = {};
  const minPosts = config.MIN_POSTS_FOR_ADJUSTMENT || 4;
  const minSampleSize = config.MIN_SAMPLE_SIZE || 3;

  // 1. æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿæ•°æ®
  if (analysis.overall.totalPosts < minPosts) {
    return {
      message: `éœ€è¦è‡³å°‘ ${minPosts} æ¬¡å‘å¸ƒæ•°æ®æ‰èƒ½è°ƒæ•´æƒé‡ (å½“å‰: ${analysis.overall.totalPosts})`,
      recommendations: []
    };
  }

  // 2. æ´»åŠ¨ç±»å‹æƒé‡è°ƒæ•´
  for (const [type, stats] of Object.entries(analysis.byType)) {
    if (stats.count < minSampleSize) {
      recommendations[type] = {
        action: 'skip',
        reason: `æ ·æœ¬é‡å¤ªå° (${stats.count} < ${minSampleSize})`,
        confidence: 'low'
      };
      continue;
    }

    const avgScore = stats.avgEngagement;
    const overallAvg = analysis.overall.avgEngagement;
    const ratio = avgScore / overallAvg;

    // è®¡ç®—å»ºè®®è°ƒæ•´å¹…åº¦
    let adjustment = 0;
    let confidence = 'medium';

    if (ratio >= 1.5) {
      adjustment = 0.20;  // +20%
      confidence = 'high';
    } else if (ratio >= 1.3) {
      adjustment = 0.15;  // +15%
    } else if (ratio >= 1.1) {
      adjustment = 0.10;  // +10%
    } else if (ratio <= 0.6) {
      adjustment = -0.20; // -20%
      confidence = 'high';
    } else if (ratio <= 0.7) {
      adjustment = -0.15; // -15%
    } else if (ratio <= 0.9) {
      adjustment = -0.10; // -10%
    } else {
      adjustment = 0;     // ä¸è°ƒæ•´
    }

    // è€ƒè™‘æ ·æœ¬é‡å½±å“ç½®ä¿¡åº¦
    if (stats.count < 5) {
      confidence = downgradeConfidence(confidence);
      adjustment *= 0.8; // é™ä½è°ƒæ•´å¹…åº¦
    }

    // åº”ç”¨è°ƒæ•´ä¸Šé™
    const currentWeight = config.eventTypePriority[type] || config.eventTypePriority.default;
    let newWeight = currentWeight * (1 + adjustment);

    // æƒé‡ä¸Šä¸‹é™ä¿æŠ¤
    newWeight = clamp(newWeight, config.MIN_WEIGHT || 1, config.MAX_WEIGHT || 15);

    recommendations[type] = {
      currentWeight,
      suggestedWeight: round(newWeight, 1),
      adjustment: round((newWeight - currentWeight) / currentWeight * 100, 1) + '%',
      reason: `å¹³å‡engagement ${avgScore.toFixed(1)} (${ratio >= 1 ? 'é«˜äº' : 'ä½äº'}æ•´ä½“${Math.abs((ratio - 1) * 100).toFixed(0)}%)`,
      confidence,
      sampleSize: stats.count
    };
  }

  // 3. å…¶ä»–ç»´åº¦è°ƒæ•´ (åœ°ç†ä½ç½®ã€ä»·æ ¼ã€æ—¶é—´ç­‰)
  // ... ç±»ä¼¼é€»è¾‘

  return recommendations;
}
```

### ç½®ä¿¡åº¦è®¡ç®—

```javascript
function calculateConfidence(posts, events, period) {
  let score = 0;

  // å‘å¸ƒæ¬¡æ•° (0-40åˆ†)
  if (posts >= 8) score += 40;
  else if (posts >= 4) score += 30;
  else if (posts >= 2) score += 15;
  else score += 0;

  // æ´»åŠ¨æ•°é‡ (0-30åˆ†)
  if (events >= 50) score += 30;
  else if (events >= 30) score += 25;
  else if (events >= 20) score += 15;
  else score += 5;

  // æ—¶é—´è·¨åº¦ (0-30åˆ†)
  const days = period.days;
  if (days >= 60) score += 30;
  else if (days >= 30) score += 20;
  else if (days >= 14) score += 10;
  else score += 0;

  // æ€»åˆ† 0-100 æ˜ å°„åˆ°ç½®ä¿¡åº¦
  if (score >= 80) return 'high';
  if (score >= 50) return 'medium';
  return 'low';
}
```

### å®‰å…¨ä¿æŠ¤æœºåˆ¶

1. **æƒé‡èŒƒå›´é™åˆ¶**
   ```javascript
   const MIN_WEIGHT = 1;
   const MAX_WEIGHT = 15;
   newWeight = clamp(newWeight, MIN_WEIGHT, MAX_WEIGHT);
   ```

2. **å•æ¬¡è°ƒæ•´å¹…åº¦é™åˆ¶**
   ```javascript
   const MAX_ADJUSTMENT_RATIO = 0.30; // Â±30%
   adjustment = clamp(adjustment, -MAX_ADJUSTMENT_RATIO, MAX_ADJUSTMENT_RATIO);
   ```

3. **ç±»å‹å¤šæ ·æ€§ä¿æŠ¤**
   ```javascript
   // ç¡®ä¿æ¯ä¸ªç±»å‹è‡³å°‘ä¿ç•™10%çš„å€™é€‰é…é¢
   const DIVERSITY_QUOTA = 0.10;
   const minEventsPerType = Math.ceil(totalCandidates * DIVERSITY_QUOTA);
   ```

4. **æ»‘åŠ¨çª—å£**
   ```javascript
   // åªçœ‹æœ€è¿‘ N æ¬¡æ•°æ®ï¼Œé¿å…é™ˆæ—§æ•°æ®å½±å“
   const SLIDING_WINDOW_SIZE = 8;
   const recentPosts = posts.slice(-SLIDING_WINDOW_SIZE);
   ```

5. **å¼‚å¸¸å€¼å¤„ç†**
   ```javascript
   // ç§»é™¤æ˜æ˜¾å¼‚å¸¸çš„æ´»åŠ¨ (å¦‚æŸæ¬¡å¤±è¯¯å¯¼è‡´æ•°æ®å¼‚å¸¸)
   function removeOutliers(events) {
     const scores = events.map(e => e.engagement_score);
     const q1 = quantile(scores, 0.25);
     const q3 = quantile(scores, 0.75);
     const iqr = q3 - q1;
     const lowerBound = q1 - 1.5 * iqr;
     const upperBound = q3 + 1.5 * iqr;

     return events.filter(e => {
       const score = e.engagement_score;
       return score >= lowerBound && score <= upperBound;
     });
   }
   ```

---

## MVP å®æ–½è®¡åˆ’

### å¼€å‘è·¯çº¿å›¾

#### **Sprint 1: æ•°æ®åŸºç¡€è®¾æ–½ (Week 1)**

**ç›®æ ‡**: æ­å»ºæ•°æ®æ”¶é›†å’Œå­˜å‚¨åŸºç¡€

- [ ] **ä»»åŠ¡1.1**: æ•°æ®åº“Schemaè®¾è®¡å’Œåˆ›å»º
  - [ ] åˆ›å»º `posts` è¡¨
  - [ ] åˆ›å»º `event_performance` è¡¨
  - [ ] åˆ›å»º `weight_adjustments` è¡¨
  - [ ] åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
  - [ ] ç¼–å†™æ•°æ®åº“è¿ç§»è„šæœ¬

- [ ] **ä»»åŠ¡1.2**: æ€§èƒ½æ•°æ®åº“ç®¡ç†æ¨¡å— (`performance-database.js`)
  - [ ] `createPost()` - åˆ›å»ºå‘å¸ƒè®°å½•
  - [ ] `createEventPerformance()` - åˆ›å»ºæ´»åŠ¨è¡¨ç°è®°å½•
  - [ ] `getRecentPosts(N)` - è·å–æœ€è¿‘Næ¬¡å‘å¸ƒ
  - [ ] `getEventsByPost(postId)` - è·å–æŸæ¬¡å‘å¸ƒçš„æ‰€æœ‰æ´»åŠ¨
  - [ ] `updateEventPerformance()` - æ›´æ–°åé¦ˆæ•°æ®
  - [ ] `saveWeightAdjustment()` - ä¿å­˜æƒé‡è°ƒæ•´è®°å½•

- [ ] **ä»»åŠ¡1.3**: ä¿®æ”¹ `generate-post.js`
  - [ ] é›†æˆæ€§èƒ½æ•°æ®åº“
  - [ ] ç”Ÿæˆå‘å¸ƒæ—¶è‡ªåŠ¨åˆ›å»º `post` è®°å½•
  - [ ] è‡ªåŠ¨ä¿å­˜æ´»åŠ¨åˆ—è¡¨åˆ° `event_performance`
  - [ ] åœ¨ç»ˆç«¯è¾“å‡ºä¸‹ä¸€æ­¥æç¤ºä¿¡æ¯

**éªŒæ”¶æ ‡å‡†**:
- âœ… è¿è¡Œ `npm run generate-post` åæ•°æ®åº“ä¸­æœ‰ç›¸åº”è®°å½•
- âœ… å¯ä»¥é€šè¿‡ SQL æŸ¥è¯¢éªŒè¯æ•°æ®å®Œæ•´æ€§
- âœ… ç»ˆç«¯è¾“å‡ºåŒ…å« post_id å’Œä¸‹ä¸€æ­¥æç¤º

**é¢„è®¡å·¥æ—¶**: 2-3å¤©

---

#### **Sprint 2: åé¦ˆæ”¶é›†å·¥å…· (Week 1-2)**

**ç›®æ ‡**: å®ç°äº¤äº’å¼åé¦ˆæ•°æ®æ”¶é›†

- [ ] **ä»»åŠ¡2.1**: åé¦ˆè¿½è¸ªå™¨ (`feedback-tracker.js`)
  - [ ] è¯»å–å‘å¸ƒè®°å½•å’Œæ´»åŠ¨åˆ—è¡¨
  - [ ] äº¤äº’å¼CLIç•Œé¢ (ä½¿ç”¨ inquirer åº“)
  - [ ] è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
  - [ ] è‡ªåŠ¨åˆ†é…äº’åŠ¨æ•°æ®åˆ°å„æ´»åŠ¨
  - [ ] è®¡ç®— engagement score
  - [ ] ä¿å­˜åˆ°æ•°æ®åº“

- [ ] **ä»»åŠ¡2.2**: CLIå‘½ä»¤ (`collect-feedback.js`)
  - [ ] è§£æå‘½ä»¤è¡Œå‚æ•°
  - [ ] è°ƒç”¨åé¦ˆè¿½è¸ªå™¨
  - [ ] å½©è‰²ç»ˆç«¯è¾“å‡º (chalk)
  - [ ] è¿›åº¦æç¤ºå’Œç¡®è®¤

- [ ] **ä»»åŠ¡2.3**: æ•°æ®æŸ¥çœ‹å·¥å…·
  ```bash
  npm run view-feedback <post_id>  # æŸ¥çœ‹æŸæ¬¡å‘å¸ƒçš„åé¦ˆ
  npm run view-feedback --all      # æŸ¥çœ‹æ‰€æœ‰å‘å¸ƒ
  ```

**éªŒæ”¶æ ‡å‡†**:
- âœ… èƒ½å®Œæ•´æ”¶é›†ä¸€æ¬¡å‘å¸ƒçš„åé¦ˆæ•°æ®
- âœ… æ•°æ®éªŒè¯æ­£ç¡® (æ€»å’Œæ£€æŸ¥)
- âœ… ç•Œé¢å‹å¥½æ˜“ç”¨
- âœ… æ•°æ®æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“

**é¢„è®¡å·¥æ—¶**: 3-4å¤©

---

#### **Sprint 3: åé¦ˆåˆ†æå¼•æ“ (Week 2)**

**ç›®æ ‡**: å®ç°æ•°æ®åˆ†æå’ŒæŠ¥å‘Šç”Ÿæˆ

- [ ] **ä»»åŠ¡3.1**: åé¦ˆåˆ†æå™¨ (`feedback-analyzer.js`)
  - [ ] `analyzeOverall()` - æ•´ä½“ç»Ÿè®¡
  - [ ] `analyzeByEventType()` - æŒ‰ç±»å‹åˆ†æ
  - [ ] `analyzeByLocation()` - æŒ‰åœ°ç†ä½ç½®åˆ†æ
  - [ ] `analyzeByPrice()` - æŒ‰ä»·æ ¼åˆ†æ
  - [ ] `analyzeByTiming()` - æŒ‰æ—¶é—´åˆ†æ
  - [ ] `analyzeByFeatures()` - æŒ‰ç‰¹å¾åˆ†æ
  - [ ] `calculateConfidence()` - ç½®ä¿¡åº¦è¯„ä¼°

- [ ] **ä»»åŠ¡3.2**: æŠ¥å‘Šç”Ÿæˆå™¨ (`report-generator.js`)
  - [ ] ç”ŸæˆJSONæ ¼å¼æŠ¥å‘Š
  - [ ] ç»ˆç«¯å¯è§†åŒ–è¾“å‡º (è¡¨æ ¼ã€å›¾è¡¨)
  - [ ] ç”Ÿæˆæƒé‡è°ƒæ•´å»ºè®®
  - [ ] ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶

- [ ] **ä»»åŠ¡3.3**: CLIå‘½ä»¤ (`analyze-feedback.js`)
  - [ ] æ”¯æŒå‚æ•° `--posts N`
  - [ ] æ”¯æŒ `--export` å¯¼å‡ºæŠ¥å‘Š
  - [ ] å½©è‰²ç»ˆç«¯è¾“å‡º

**éªŒæ”¶æ ‡å‡†**:
- âœ… åŸºäº4æ¬¡å‘å¸ƒæ•°æ®ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
- âœ… æŠ¥å‘ŠåŒ…å«æ‰€æœ‰ç»´åº¦åˆ†æ
- âœ… å»ºè®®åˆç†ä¸”æœ‰æ•°æ®æ”¯æ’‘
- âœ… æŠ¥å‘Šä¿å­˜åˆ° `output/reports/`

**é¢„è®¡å·¥æ—¶**: 3-4å¤©

---

#### **Sprint 4: æƒé‡è°ƒæ•´ç³»ç»Ÿ (Week 3)**

**ç›®æ ‡**: å®Œæˆé—­ç¯ï¼Œå®ç°æƒé‡åŠ¨æ€è°ƒæ•´

- [ ] **ä»»åŠ¡4.1**: æƒé‡è°ƒæ•´å™¨ (`weight-adjuster.js`)
  - [ ] è¯»å–åˆ†ææŠ¥å‘Š
  - [ ] ç”Ÿæˆæƒé‡è°ƒæ•´å»ºè®®
  - [ ] åº”ç”¨å®‰å…¨ä¿æŠ¤æœºåˆ¶
  - [ ] äº¤äº’å¼ç¡®è®¤æµç¨‹
  - [ ] ç”Ÿæˆ `config-dynamic.json`
  - [ ] ä¿å­˜è°ƒæ•´å†å²

- [ ] **ä»»åŠ¡4.2**: é…ç½®ç®¡ç†å™¨ (`config-manager.js`)
  - [ ] `getConfig()` - ä¼˜å…ˆè¯»å–åŠ¨æ€é…ç½®
  - [ ] `getDefaultConfig()` - è¯»å–é»˜è®¤é…ç½®
  - [ ] `resetConfig()` - é‡ç½®ä¸ºé»˜è®¤
  - [ ] `getAdjustmentHistory()` - æŸ¥è¯¢è°ƒæ•´å†å²

- [ ] **ä»»åŠ¡4.3**: ä¿®æ”¹ `scrape-events.js`
  - [ ] é›†æˆé…ç½®ç®¡ç†å™¨
  - [ ] åº”ç”¨åŠ¨æ€æƒé‡
  - [ ] æ˜¾ç¤ºå½“å‰æƒé‡ä¿¡æ¯
  - [ ] åœ¨æ—¥å¿—ä¸­æ ‡æ³¨ä½¿ç”¨çš„é…ç½®æ¥æº

- [ ] **ä»»åŠ¡4.4**: CLIå‘½ä»¤ (`adjust-weights.js`)
  - [ ] æ”¯æŒ `--report-id`
  - [ ] æ”¯æŒ `--auto` (è·³è¿‡ç¡®è®¤)
  - [ ] æ”¯æŒ `--dry-run` (åªé¢„è§ˆ)

- [ ] **ä»»åŠ¡4.5**: æƒé‡ç®¡ç†å·¥å…·
  ```bash
  npm run weights:view      # æŸ¥çœ‹å½“å‰æƒé‡
  npm run weights:reset     # é‡ç½®ä¸ºé»˜è®¤
  npm run weights:history   # æŸ¥çœ‹è°ƒæ•´å†å²
  npm run weights:rollback <adjustment_id>  # å›æ»š
  ```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å®Œæˆä¸€æ¬¡å®Œæ•´é—­ç¯æµ‹è¯•
- âœ… æƒé‡è°ƒæ•´æœ‰è¯¦ç»†è¯´æ˜
- âœ… `config-dynamic.json` æ ¼å¼æ­£ç¡®
- âœ… ä¸‹æ¬¡æŠ“å–åº”ç”¨æ–°æƒé‡
- âœ… å¯ä»¥å›æ»šå’Œé‡ç½®

**é¢„è®¡å·¥æ—¶**: 4-5å¤©

---

#### **Sprint 5: æ•°æ®å¯¼å‡ºå’Œæ–‡æ¡£ (Week 3)**

**ç›®æ ‡**: å®Œå–„æ•°æ®å¯¼å‡ºå’Œé¡¹ç›®æ–‡æ¡£

- [ ] **ä»»åŠ¡5.1**: æ•°æ®å¯¼å‡ºå·¥å…· (`export-feedback.js`)
  - [ ] å¯¼å‡ºå®Œæ•´æ•°æ®å¤‡ä»½ (JSON)
  - [ ] å¯¼å‡º CSV æ ¼å¼ (Excelå…¼å®¹)
  - [ ] å¯¼å‡ºæƒé‡è°ƒæ•´å†å²
  - [ ] æ”¯æŒæ—¥æœŸèŒƒå›´è¿‡æ»¤

- [ ] **ä»»åŠ¡5.2**: æ–‡æ¡£å®Œå–„
  - [ ] æ›´æ–° README.md
  - [ ] æ›´æ–° ARCHITECTURE.md
  - [ ] åˆ›å»º FEEDBACK_LOOP_USAGE.md (ä½¿ç”¨æŒ‡å—)
  - [ ] APIæ–‡æ¡£ (JSDoc)

- [ ] **ä»»åŠ¡5.3**: æµ‹è¯•å’Œä¼˜åŒ–
  - [ ] å•å…ƒæµ‹è¯• (å…³é”®å‡½æ•°)
  - [ ] é›†æˆæµ‹è¯• (å®Œæ•´æµç¨‹)
  - [ ] æ€§èƒ½ä¼˜åŒ–
  - [ ] é”™è¯¯å¤„ç†å®Œå–„

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ä»¥å¯¼å‡ºæ‰€æœ‰æ ¼å¼çš„æ•°æ®
- âœ… æ–‡æ¡£å®Œæ•´å‡†ç¡®
- âœ… æµ‹è¯•è¦†ç›–å…³é”®è·¯å¾„
- âœ… é”™è¯¯æç¤ºå‹å¥½

**é¢„è®¡å·¥æ—¶**: 2-3å¤©

---

### æ€»ä½“æ—¶é—´ä¼°ç®—

| Sprint | å†…å®¹ | å·¥æ—¶ | å‘¨ |
|--------|------|------|-----|
| Sprint 1 | æ•°æ®åŸºç¡€è®¾æ–½ | 2-3å¤© | Week 1 |
| Sprint 2 | åé¦ˆæ”¶é›†å·¥å…· | 3-4å¤© | Week 1-2 |
| Sprint 3 | åé¦ˆåˆ†æå¼•æ“ | 3-4å¤© | Week 2 |
| Sprint 4 | æƒé‡è°ƒæ•´ç³»ç»Ÿ | 4-5å¤© | Week 3 |
| Sprint 5 | æ•°æ®å¯¼å‡ºå’Œæ–‡æ¡£ | 2-3å¤© | Week 3 |
| **æ€»è®¡** | **MVP v1.0** | **14-19å¤©** | **3å‘¨** |

---

### å¼€å‘ä¾èµ–

éœ€è¦å®‰è£…çš„æ–°npmåŒ…ï¼š

```bash
npm install --save \
  inquirer@^8.2.5 \          # äº¤äº’å¼CLI
  chalk@^4.1.2 \             # å½©è‰²ç»ˆç«¯è¾“å‡º
  cli-table3@^0.6.3 \        # ç»ˆç«¯è¡¨æ ¼
  cli-progress@^3.12.0 \     # è¿›åº¦æ¡
  moment@^2.29.4             # æ—¥æœŸå¤„ç†

npm install --save-dev \
  jest@^29.5.0 \             # æµ‹è¯•æ¡†æ¶
  @types/node@^20.0.0        # TypeScriptç±»å‹å®šä¹‰(å¯é€‰)
```

---

## API é›†æˆè§„åˆ’

### Short.io API é›†æˆ (ä¼˜å…ˆçº§: é«˜)

#### API æ–‡æ¡£
- **å®˜æ–¹æ–‡æ¡£**: https://developers.short.io/
- **è®¤è¯æ–¹å¼**: API Key (å·²æœ‰)
- **å…³é”®ç«¯ç‚¹**:
  - `GET /api/links/{id}/statistics` - è·å–ç‚¹å‡»ç»Ÿè®¡
  - `GET /api/links` - åˆ—å‡ºæ‰€æœ‰çŸ­é“¾æ¥

#### é›†æˆè®¡åˆ’

```javascript
// src/feedback/shortio-client.js

class ShortioClient {
  constructor(apiKey) {
    this.apiKey = apiKey;
    this.baseUrl = 'https://api.short.io';
  }

  async getLinkStatistics(linkId) {
    const response = await fetch(`${this.baseUrl}/api/links/${linkId}/statistics`, {
      headers: {
        'Authorization': this.apiKey,
        'Content-Type': 'application/json'
      }
    });

    const data = await response.json();

    return {
      clicks: data.clicks || 0,
      uniqueClicks: data.humanClicks || 0,
      lastClick: data.lastClick,
      createdAt: data.createdAt
    };
  }

  async getClicksForPost(postId) {
    // 1. ä»æ•°æ®åº“è¯»å–è¯¥å‘å¸ƒçš„æ‰€æœ‰çŸ­é“¾æ¥
    const events = await performanceDB.getEventsByPost(postId);

    // 2. æ‰¹é‡è·å–ç‚¹å‡»æ•°æ®
    const results = await Promise.all(
      events.map(async (event) => {
        const shortUrl = event.event_url;
        const linkId = extractLinkId(shortUrl);
        const stats = await this.getLinkStatistics(linkId);

        return {
          event_id: event.id,
          clicks: stats.clicks
        };
      })
    );

    return results;
  }
}
```

**ä½¿ç”¨åœºæ™¯**:
```bash
# è‡ªåŠ¨ä» Short.io è·å–ç‚¹å‡»æ•°æ®
npm run collect-feedback post_2025-11-04_1530 --auto-shortio

# è¾“å‡º:
# ğŸ”— æ­£åœ¨ä» Short.io è·å–ç‚¹å‡»æ•°æ®...
# âœ… 8/8 æ´»åŠ¨çš„ç‚¹å‡»æ•°æ®å·²è‡ªåŠ¨è·å–
#
# è¯·è¡¥å……å°çº¢ä¹¦äº’åŠ¨æ•°æ®:
# ğŸ‘ æ€»ç‚¹èµæ•°: ...
```

**é¢„è®¡å¼€å‘æ—¶é—´**: 1-2å¤©
**å®æ–½é˜¶æ®µ**: MVP v1.1 (ç¬¬4-5å‘¨)

---

### å°çº¢ä¹¦ API é›†æˆ (ä¼˜å…ˆçº§: ä¸­)

#### å½“å‰çŠ¶å†µ
- âŒ å°çº¢ä¹¦**æ²¡æœ‰å…¬å¼€API**
- âš ï¸  å¯èƒ½çš„æ›¿ä»£æ–¹æ¡ˆ:
  1. **çˆ¬è™«æ–¹æ¡ˆ**: ä½¿ç”¨ Puppeteer æ¨¡æ‹Ÿç™»å½•è·å–æ•°æ® (è¿åToSé£é™©)
  2. **æµè§ˆå™¨æ‰©å±•**: å¼€å‘Chromeæ‰©å±•è¾…åŠ©å¤åˆ¶æ•°æ®
  3. **ç­‰å¾…å®˜æ–¹API**: ç”³è¯·å°çº¢ä¹¦å¼€æ”¾å¹³å°

#### çŸ­æœŸæ–¹æ¡ˆ: æµè§ˆå™¨æ‰©å±•è¾…åŠ©

åˆ›å»ºä¸€ä¸ªç®€å•çš„Chromeæ‰©å±•ï¼Œç”¨äºä»å°çº¢ä¹¦é¡µé¢ä¸€é”®å¤åˆ¶æ•°æ®ï¼š

```javascript
// chrome-extension/content-script.js

function extractXiaohongshuData() {
  const data = {
    likes: parseInt(document.querySelector('.like-count').textContent) || 0,
    favorites: parseInt(document.querySelector('.favorite-count').textContent) || 0,
    comments: parseInt(document.querySelector('.comment-count').textContent) || 0,
    shares: parseInt(document.querySelector('.share-count').textContent) || 0
  };

  // å¤åˆ¶åˆ°å‰ªè´´æ¿ (JSONæ ¼å¼)
  navigator.clipboard.writeText(JSON.stringify(data));
  alert('æ•°æ®å·²å¤åˆ¶ï¼ç²˜è´´åˆ°åé¦ˆæ”¶é›†å·¥å…·å³å¯');
}

// æ·»åŠ ä¸€ä¸ªæŒ‰é’®åˆ°é¡µé¢
const button = document.createElement('button');
button.textContent = 'å¯¼å‡ºæ•°æ®åˆ°åé¦ˆå·¥å…·';
button.onclick = extractXiaohongshuData;
document.body.appendChild(button);
```

**ä½¿ç”¨æµç¨‹**:
1. æ‰“å¼€å°çº¢ä¹¦å¸–å­é¡µé¢
2. ç‚¹å‡»æ‰©å±•æŒ‰é’® "å¯¼å‡ºæ•°æ®"
3. æ•°æ®è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
4. åœ¨ç»ˆç«¯è¿è¡Œ `npm run collect-feedback` æ—¶ç²˜è´´

**é¢„è®¡å¼€å‘æ—¶é—´**: 2-3å¤©
**å®æ–½é˜¶æ®µ**: MVP v1.2 (ç¬¬6-8å‘¨ï¼Œå¯é€‰)

---

### é•¿æœŸè§„åˆ’: å…¨è‡ªåŠ¨æ•°æ®é‡‡é›†

#### ç†æƒ³çŠ¶æ€ (å¦‚æœæœ‰API)

```bash
# å®Œå…¨è‡ªåŠ¨åŒ–æµç¨‹
npm run collect-feedback post_2025-11-04_1530 --auto

# ç³»ç»Ÿä¼š:
# 1. ä» Short.io API è‡ªåŠ¨è·å–æ‰€æœ‰ç‚¹å‡»æ•°æ®
# 2. ä»å°çº¢ä¹¦ API è‡ªåŠ¨è·å–äº’åŠ¨æ•°æ®
# 3. è®¡ç®— engagement score
# 4. ä¿å­˜åˆ°æ•°æ®åº“
#
# âœ… åé¦ˆæ”¶é›†å®Œæˆï¼æ— éœ€æ‰‹åŠ¨è¾“å…¥ã€‚
```

#### å®šæ—¶è‡ªåŠ¨é‡‡é›†

```javascript
// ä½¿ç”¨ node-cron å®šæ—¶ä»»åŠ¡

const cron = require('node-cron');

// æ¯å¤©å‡Œæ™¨ 2 ç‚¹è‡ªåŠ¨é‡‡é›†å‰ä¸€å¤©çš„åé¦ˆæ•°æ®
cron.schedule('0 2 * * *', async () => {
  const recentPosts = await performanceDB.getPostsWithoutFeedback();

  for (const post of recentPosts) {
    // æ£€æŸ¥å‘å¸ƒæ˜¯å¦æ»¡2å¤© (æ•°æ®ç¨³å®š)
    if (daysSince(post.published_at) >= 2) {
      console.log(`è‡ªåŠ¨é‡‡é›†åé¦ˆ: ${post.post_id}`);
      await autoCollectFeedback(post.post_id);
    }
  }
});
```

**å®æ–½é˜¶æ®µ**: MVP v2.0 (ç¬¬12å‘¨+ï¼Œå–å†³äºAPIå¯ç”¨æ€§)

---

## éªŒæ”¶æ ‡å‡†

### MVP v0.1 éªŒæ”¶æ ‡å‡†

**åŠŸèƒ½æµ‹è¯•**:
- [ ] è¿è¡Œ `npm run generate-post` å:
  - [ ] `posts` è¡¨ä¸­æœ‰æ–°è®°å½•
  - [ ] `event_performance` è¡¨ä¸­æœ‰å¯¹åº”çš„æ´»åŠ¨è®°å½•
  - [ ] æ‰€æœ‰å­—æ®µæ­£ç¡®å¡«å……
  - [ ] ç»ˆç«¯è¾“å‡ºåŒ…å« post_id

- [ ] è¿è¡Œ `npm run collect-feedback <post_id>`:
  - [ ] èƒ½æ­£å¸¸å¯åŠ¨äº¤äº’å¼ç•Œé¢
  - [ ] èƒ½è¾“å…¥åé¦ˆæ•°æ®
  - [ ] æ•°æ®éªŒè¯æ­£ç¡®
  - [ ] ä¿å­˜åˆ°æ•°æ®åº“æˆåŠŸ

- [ ] æ•°æ®å®Œæ•´æ€§:
  - [ ] æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½æœ‰å€¼
  - [ ] å¤–é”®å…³è”æ­£ç¡®
  - [ ] engagement_score è®¡ç®—æ­£ç¡®

**éåŠŸèƒ½æµ‹è¯•**:
- [ ] ç•Œé¢å‹å¥½æ˜“ç”¨
- [ ] é”™è¯¯æç¤ºæ¸…æ™°
- [ ] æ€§èƒ½å¯æ¥å— (<2ç§’å“åº”)

---

### MVP v0.2 éªŒæ”¶æ ‡å‡†

**åŠŸèƒ½æµ‹è¯•**:
- [ ] è¿è¡Œ `npm run analyze-feedback`:
  - [ ] åŸºäº4æ¬¡å‘å¸ƒç”Ÿæˆå®Œæ•´æŠ¥å‘Š
  - [ ] æŠ¥å‘ŠåŒ…å«æ‰€æœ‰åˆ†æç»´åº¦
  - [ ] ç»Ÿè®¡æ•°æ®å‡†ç¡®
  - [ ] æƒé‡å»ºè®®åˆç†

- [ ] æŠ¥å‘Šè¾“å‡º:
  - [ ] ç»ˆç«¯è¾“å‡ºæ ¼å¼ç¾è§‚
  - [ ] è¡¨æ ¼å¯¹é½æ­£ç¡®
  - [ ] å½©è‰²é«˜äº®é‡è¦ä¿¡æ¯
  - [ ] JSONæŠ¥å‘Šä¿å­˜æˆåŠŸ

- [ ] æ•°æ®å¯¼å‡º:
  - [ ] JSONå¯¼å‡ºå®Œæ•´
  - [ ] CSVæ ¼å¼æ­£ç¡® (Excelå¯æ‰“å¼€)

**è´¨é‡æ ‡å‡†**:
- [ ] åˆ†æé€»è¾‘å‡†ç¡®
- [ ] ç½®ä¿¡åº¦è¯„ä¼°åˆç†
- [ ] å»ºè®®æœ‰æ•°æ®æ”¯æ’‘

---

### MVP v0.3 éªŒæ”¶æ ‡å‡†

**åŠŸèƒ½æµ‹è¯•**:
- [ ] è¿è¡Œ `npm run adjust-weights`:
  - [ ] æ­£ç¡®è¯»å–åˆ†ææŠ¥å‘Š
  - [ ] æ˜¾ç¤ºè¯¦ç»†çš„è°ƒæ•´å»ºè®®
  - [ ] äº¤äº’å¼ç¡®è®¤æµç¨‹æ­£å¸¸
  - [ ] `config-dynamic.json` ç”Ÿæˆæ­£ç¡®
  - [ ] è°ƒæ•´å†å²ä¿å­˜åˆ°æ•°æ®åº“

- [ ] è¿è¡Œ `npm run scrape`:
  - [ ] ä¼˜å…ˆè¯»å– `config-dynamic.json`
  - [ ] åº”ç”¨åŠ¨æ€æƒé‡æ’åº
  - [ ] ç»ˆç«¯æ˜¾ç¤ºå½“å‰æƒé‡ä¿¡æ¯
  - [ ] æ´»åŠ¨æ’åºç¬¦åˆé¢„æœŸ

- [ ] æƒé‡ç®¡ç†:
  - [ ] `npm run weights:view` æ­£ç¡®æ˜¾ç¤º
  - [ ] `npm run weights:reset` èƒ½é‡ç½®
  - [ ] `npm run weights:history` æ˜¾ç¤ºå†å²

**é—­ç¯æµ‹è¯•**:
- [ ] å®Œæ•´æµç¨‹æµ‹è¯•:
  1. å‘å¸ƒæ´»åŠ¨ â†’ è‡ªåŠ¨è®°å½•
  2. æ”¶é›†åé¦ˆ â†’ æ•°æ®ä¿å­˜
  3. åˆ†æåé¦ˆ â†’ ç”ŸæˆæŠ¥å‘Š
  4. è°ƒæ•´æƒé‡ â†’ åº”ç”¨é…ç½®
  5. ä¸‹æ¬¡æŠ“å– â†’ ä½¿ç”¨æ–°æƒé‡
  6. éªŒè¯æ•ˆæœ â†’ æ´»åŠ¨æ’åºæ”¹å˜

**è´¨é‡æ ‡å‡†**:
- [ ] é—­ç¯å®Œæ•´æ— æ–­ç‚¹
- [ ] æ•°æ®æµè½¬æ­£ç¡®
- [ ] æƒé‡è°ƒæ•´æœ‰æ•ˆ
- [ ] å¯è¿½æº¯å¯å›æ»š

---

## é£é™©å’Œç¼“è§£æªæ–½

### æŠ€æœ¯é£é™©

#### é£é™©1: æ•°æ®é‡‡é›†æˆæœ¬é«˜

**é£é™©æè¿°**: MVPé˜¶æ®µæ‰‹åŠ¨è¾“å…¥æ•°æ®è€—æ—¶é•¿ï¼Œå¯èƒ½å¯¼è‡´ç”¨æˆ·æ”¾å¼ƒä½¿ç”¨

**å½±å“**: é«˜
**æ¦‚ç‡**: ä¸­

**ç¼“è§£æªæ–½**:
1. âœ… ä¼˜åŒ–è¾“å…¥ç•Œé¢ï¼Œå‡å°‘è¾“å…¥é¡¹
2. âœ… æä¾›"å¿«é€Ÿæ¨¡å¼"ï¼šåªè¾“å…¥Short.ioç‚¹å‡»ï¼Œå…¶ä»–è‡ªåŠ¨åˆ†é…
3. âœ… å¼€å‘æµè§ˆå™¨æ‰©å±•è¾…åŠ©å¤åˆ¶æ•°æ®
4. âœ… ä¼˜å…ˆé›†æˆ Short.io API (æœ€é‡è¦çš„æŒ‡æ ‡)

---

#### é£é™©2: å°æ ·æœ¬å¯¼è‡´é”™è¯¯è°ƒæ•´

**é£é™©æè¿°**: å‰æœŸæ•°æ®å°‘ï¼Œæƒé‡è°ƒæ•´å¯èƒ½ä¸å‡†ç¡®

**å½±å“**: ä¸­
**æ¦‚ç‡**: é«˜

**ç¼“è§£æªæ–½**:
1. âœ… è®¾ç½®æœ€å°æ ·æœ¬é‡è¦æ±‚ (è‡³å°‘4æ¬¡å‘å¸ƒ)
2. âœ… æ ¹æ®æ ·æœ¬é‡åŠ¨æ€è°ƒæ•´ç½®ä¿¡åº¦
3. âœ… æ ·æœ¬å°æ—¶é™ä½è°ƒæ•´å¹…åº¦
4. âœ… äººå·¥ç¡®è®¤æœºåˆ¶ï¼Œå¯ä»¥æ‹’ç»ä¸åˆç†çš„è°ƒæ•´
5. âœ… æä¾›å›æ»šåŠŸèƒ½

---

#### é£é™©3: è¿‡åº¦ä¼˜åŒ–å¯¼è‡´å†…å®¹å•ä¸€

**é£é™©æè¿°**: æŒç»­æé«˜æŸç±»æ´»åŠ¨æƒé‡ï¼Œæœ€ç»ˆå€™é€‰åˆ—è¡¨ç¼ºä¹å¤šæ ·æ€§

**å½±å“**: ä¸­
**æ¦‚ç‡**: ä¸­

**ç¼“è§£æªæ–½**:
1. âœ… æƒé‡ä¸Šé™ä¿æŠ¤ (æœ€é«˜15)
2. âœ… ç±»å‹å¤šæ ·æ€§é…é¢ (æ¯ç±»è‡³å°‘10%)
3. âœ… æ¢ç´¢-åˆ©ç”¨å¹³è¡¡ (10-20%å€™é€‰ç”¨äºæ¢ç´¢æ–°ç±»å‹)
4. âœ… å®šæœŸå®¡æŸ¥æŠ¥å‘Šï¼Œç›‘æ§å¤šæ ·æ€§æŒ‡æ ‡

---

#### é£é™©4: APIé™æµæˆ–å¤±æ•ˆ

**é£é™©æè¿°**: Short.ioæˆ–å°çº¢ä¹¦APIå¯èƒ½é™æµæˆ–å¤±æ•ˆ

**å½±å“**: ä¸­
**æ¦‚ç‡**: ä½-ä¸­

**ç¼“è§£æªæ–½**:
1. âœ… å®ç°é™çº§æ–¹æ¡ˆ (APIå¤±è´¥ â†’ æ‰‹åŠ¨è¾“å…¥)
2. âœ… è¯·æ±‚é‡è¯•æœºåˆ¶ (æŒ‡æ•°é€€é¿)
3. âœ… ç¼“å­˜å·²è·å–çš„æ•°æ®
4. âœ… ç›‘æ§APIè°ƒç”¨çŠ¶æ€

---

### ä¸šåŠ¡é£é™©

#### é£é™©5: ç”¨æˆ·ä¸ä½¿ç”¨åé¦ˆç³»ç»Ÿ

**é£é™©æè¿°**: ç”¨æˆ·è§‰å¾—éº»çƒ¦ï¼Œç»§ç»­ä½¿ç”¨å›ºå®šæƒé‡

**å½±å“**: é«˜
**æ¦‚ç‡**: ä¸­

**ç¼“è§£æªæ–½**:
1. âœ… ç®€åŒ–æ“ä½œæµç¨‹ï¼Œå°½é‡è‡ªåŠ¨åŒ–
2. âœ… æä¾›æ¸…æ™°çš„ä»·å€¼è¯´æ˜ (æé«˜äº’åŠ¨ç‡30%)
3. âœ… å±•ç¤ºå¯¹æ¯”æ•°æ® (è°ƒæ•´å‰åæ•ˆæœ)
4. âœ… å®šæœŸå‘é€ä¼˜åŒ–æŠ¥å‘Šï¼Œä¿æŒç²˜æ€§

---

#### é£é™©6: å­£èŠ‚æ€§å˜åŒ–å¹²æ‰°

**é£é™©æè¿°**: æŸäº›ç±»å‹æ´»åŠ¨åœ¨ç‰¹å®šå­£èŠ‚è¡¨ç°å¥½ï¼Œä¸ä»£è¡¨é•¿æœŸè¶‹åŠ¿

**å½±å“**: ä¸­
**æ¦‚ç‡**: é«˜

**ç¼“è§£æªæ–½**:
1. âœ… ä½¿ç”¨æ»‘åŠ¨çª—å£ (åªçœ‹æœ€è¿‘æ•°æ®)
2. âœ… æ ‡æ³¨å­£èŠ‚æ€§ç‰¹å¾ (å¦‚"å¤å­£æˆ·å¤–æ´»åŠ¨")
3. âœ… é•¿æœŸç›‘æ§ï¼Œå­£èŠ‚æ€§è°ƒæ•´
4. âœ… æä¾›æ‰‹åŠ¨è¦†ç›–åŠŸèƒ½

---

## æœªæ¥è·¯çº¿å›¾

### Phase 1: MVP (Week 1-3) âœ…

- [x] åŸºç¡€æ•°æ®æ”¶é›†
- [x] æ‰‹åŠ¨åé¦ˆè¾“å…¥
- [x] åˆ†ææŠ¥å‘Šç”Ÿæˆ
- [x] æƒé‡è°ƒæ•´é—­ç¯

### Phase 2: åŠè‡ªåŠ¨åŒ– (Week 4-8)

- [ ] Short.io API é›†æˆ
- [ ] æµè§ˆå™¨æ‰©å±• (è¾…åŠ©å¤åˆ¶å°çº¢ä¹¦æ•°æ®)
- [ ] è‡ªåŠ¨æŠ¥å‘Šé‚®ä»¶é€šçŸ¥
- [ ] Web Dashboard (æŸ¥çœ‹æŠ¥å‘Š)

### Phase 3: é«˜çº§åˆ†æ (Week 9-12)

- [ ] å¤šç»´åº¦äº¤å‰åˆ†æ (å¦‚: SFçš„market vs å—æ¹¾çš„market)
- [ ] æ—¶é—´åºåˆ—å¯è§†åŒ– (è¶‹åŠ¿å›¾)
- [ ] A/Bæµ‹è¯•æ¡†æ¶ (æµ‹è¯•ä¸åŒæƒé‡é…ç½®)
- [ ] é¢„æµ‹æ¨¡å‹ (é¢„æµ‹æ´»åŠ¨è¡¨ç°)

### Phase 4: å…¨è‡ªåŠ¨åŒ– (Week 13+)

- [ ] å°çº¢ä¹¦APIé›†æˆ (å¦‚æœå¯ç”¨)
- [ ] å…¨è‡ªåŠ¨åé¦ˆé‡‡é›†
- [ ] è‡ªåŠ¨æƒé‡è°ƒæ•´ (æ— éœ€äººå·¥ç¡®è®¤)
- [ ] æ™ºèƒ½æ¨èå¼•æ“

### Phase 5: æœºå™¨å­¦ä¹  (æœªæ¥)

- [ ] è®­ç»ƒMLæ¨¡å‹é¢„æµ‹æ´»åŠ¨è¡¨ç°
- [ ] ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ
- [ ] è‡ªç„¶è¯­è¨€å¤„ç† (åˆ†æè¯„è®ºæƒ…æ„Ÿ)
- [ ] å¼‚å¸¸æ£€æµ‹ (è¯†åˆ«å¼‚å¸¸å‘å¸ƒ)

---

## é™„å½•

### A. æ•°æ®åº“å®Œæ•´Schema

å®Œæ•´çš„SQLè„šæœ¬è§: `/code/src/feedback/schema.sql`

### B. é…ç½®æ–‡ä»¶ç¤ºä¾‹

å®Œæ•´çš„é…ç½®æ–‡ä»¶ç¤ºä¾‹è§: `/code/config-dynamic.example.json`

### C. APIæ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£è§: `/code/docs/FEEDBACK_API.md`

### D. æœ¯è¯­è¡¨

| æœ¯è¯­ | è‹±æ–‡ | å®šä¹‰ |
|------|------|------|
| å‚ä¸åº¦åˆ†æ•° | Engagement Score | ç»¼åˆåé¦ˆæŒ‡æ ‡çš„åŠ æƒåˆ†æ•° |
| æƒé‡ | Weight | æ´»åŠ¨ç±»å‹çš„ä¼˜å…ˆçº§ç³»æ•° |
| ç½®ä¿¡åº¦ | Confidence | åŸºäºæ ·æœ¬é‡å’Œæ—¶é—´è·¨åº¦çš„å¯é æ€§è¯„ä¼° |
| é—­ç¯ | Closed Loop | ä»åé¦ˆåˆ°è°ƒæ•´çš„å®Œæ•´å¾ªç¯ |
| æ»‘åŠ¨çª—å£ | Sliding Window | åªçœ‹æœ€è¿‘Næ¬¡æ•°æ®çš„åˆ†ææ–¹æ³• |
| å†·å¯åŠ¨ | Cold Start | åˆæœŸæ²¡æœ‰å†å²æ•°æ®çš„é˜¶æ®µ |

---

## æ–‡æ¡£ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2025-11-01 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´è®¾è®¡æ–‡æ¡£ | AI Sculptor |

---

## è”ç³»å’Œåé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- GitHub Issues: [é¡¹ç›®ä»“åº“]/issues
- æ–‡æ¡£æ›´æ–°: æ¬¢è¿æäº¤ Pull Request

---

**æ–‡æ¡£ç»“æŸ**

ğŸ“Œ **ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:
1. Review æ­¤è®¾è®¡æ–‡æ¡£
2. ç¡®è®¤æŠ€æœ¯æ–¹æ¡ˆå’Œæ—¶é—´è®¡åˆ’
3. å¼€å§‹ Sprint 1 å¼€å‘

