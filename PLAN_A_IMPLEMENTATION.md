# æ–¹æ¡ˆ A å®žçŽ°è¯´æ˜Ž - åŸºäºŽå…ƒç´ æå–çš„åœ°å€æ ¼å¼åŒ–

## ðŸŽ¯ é—®é¢˜å›žé¡¾

ä½ å‘çŽ°æŠ“å–çš„åœ°å€æ ¼å¼ä¸æ­£ç¡®ï¼š

```
âŒ Thrive City1, Warriors WaySan Francisco, CA 94158
âŒ San Francisco County Fair Building1199 9th, AveSan Francisco, CA 94122
```

**é—®é¢˜æ ¹æº**ï¼š
ä¹‹å‰çš„ä»£ç ä½¿ç”¨ `$address.text()` èŽ·å–æ•´ä¸ªåœ°å€å—çš„æ–‡æœ¬ï¼Œè¿™ä¼šæŠŠæ‰€æœ‰ä¸åŒæ ‡ç­¾ï¼ˆtagï¼‰é‡Œçš„å†…å®¹åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¼è‡´ï¼š
1. é€—å·åœ¨é”™è¯¯çš„ä½ç½®ï¼ˆåœ¨é—¨ç‰Œå·åŽé¢ï¼‰
2. åœºé¦†åã€è¡—é“åœ°å€ã€åŸŽå¸‚ä¹‹é—´æ²¡æœ‰æ­£ç¡®çš„åˆ†éš”ç¬¦

## âœ… æ–¹æ¡ˆ A - åˆ†åˆ«æå–å…ƒç´ 

### æ ¸å¿ƒæ€è·¯

ä½ çš„å»ºè®®æ˜¯å¯¹çš„ï¼Eventbrite çš„åœ°å€ä¿¡æ¯åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„ HTML å…ƒç´ ä¸­ï¼š

1. **ç¬¬ä¸€ä¸ª tag**ï¼šåœºé¦†åç§° (å¦‚ "Thrive City")
2. **ç¬¬äºŒä¸ª tag**ï¼šè¡—é“åœ°å€ (å¦‚ "1 Warriors Way")
3. **ç¬¬ä¸‰ä¸ª tag**ï¼šåŸŽå¸‚, å·ž é‚®ç¼– (å¦‚ "San Francisco, CA 94158")

**ç»„åˆè§„åˆ™**ï¼š
- ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªä¹‹é—´ï¼š**åŠ ç©ºæ ¼**
- ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªä¹‹é—´ï¼š**åŠ  ", "ï¼ˆé€—å·+ç©ºæ ¼ï¼‰**

**ç»“æžœ**ï¼š
```
âœ… Thrive City 1 Warriors Way, San Francisco, CA 94158
```

### å®žçŽ°ç»†èŠ‚

æ–°çš„ `extractFullAddress()` æ–¹æ³•ä½¿ç”¨ä¸‰å±‚ç­–ç•¥ï¼š

#### æ–¹æ³•1ï¼šæå–ç›´æŽ¥å­å…ƒç´ 

```javascript
const children = $address.children();

children.each((i, elem) => {
  const text = $(elem).text().trim();
  // è¿‡æ»¤æŽ‰ "Get directions" ç­‰éžåœ°å€æ–‡æœ¬
  if (text && !text.match(/get directions|view map|map/i)) {
    parts.push(text);
  }
});
```

**å¤„ç†é€»è¾‘**ï¼š
- å¦‚æžœæœ‰ **2ä¸ªéƒ¨åˆ†**ï¼š`è¡—é“åœ°å€, åŸŽå¸‚å·žé‚®ç¼–`
- å¦‚æžœæœ‰ **3ä¸ªéƒ¨åˆ†**ï¼š`åœºé¦†å è¡—é“åœ°å€, åŸŽå¸‚å·žé‚®ç¼–`
- å¦‚æžœæœ‰ **3+ä¸ªéƒ¨åˆ†**ï¼š`å‰é¢ç”¨ç©ºæ ¼è¿žæŽ¥, æœ€åŽä¸€ä¸ª`

#### æ–¹æ³•2ï¼šæŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„åœ°å€å…ƒç´ 

å¦‚æžœç›´æŽ¥å­å…ƒç´ æå–å¤±è´¥ï¼ŒæŸ¥æ‰¾æ‰€æœ‰ `div`, `span`, `p` æ ‡ç­¾ï¼š

```javascript
const addressElements = $address.find('div, span, p').filter((i, elem) => {
  const $elem = $(elem);
  const hasChildren = $elem.children().length > 0;
  const isValidText = text &&
                     !text.match(/get directions|view map/i) &&
                     text.length > 1 &&
                     text.length < 200;

  return isValidText && !hasChildren; // åªè¦å¶å­èŠ‚ç‚¹
});
```

**åŽ»é‡å¤„ç†**ï¼š
- é¿å…å­å…ƒç´ åŒ…å«çˆ¶å…ƒç´ çš„æ–‡æœ¬
- ä½¿ç”¨ Set è·Ÿè¸ªå·²è§è¿‡çš„æ–‡æœ¬

#### æ–¹æ³•3ï¼šåŽå¤‡æ–¹æ¡ˆ

å¦‚æžœå‰ä¸¤ç§æ–¹æ³•éƒ½å¤±è´¥ï¼Œè¿”å›žåŸºæœ¬æ¸…ç†åŽçš„æ–‡æœ¬ï¼š

```javascript
let addressText = $address.text().trim();
addressText = addressText.replace(/Get directions.*$/i, '').trim();
return addressText;
```

## ðŸ“Š é¢„æœŸæ•ˆæžœ

### ç¤ºä¾‹ 1: Thrive City
```
åŽŸå§‹ï¼ˆé”™è¯¯ï¼‰: Thrive City1, Warriors WaySan Francisco, CA 94158
æå–åˆ°3ä¸ªéƒ¨åˆ†:
  [0] Thrive City
  [1] 1 Warriors Way
  [2] San Francisco, CA 94158
ç»„åˆç»“æžœ: Thrive City 1 Warriors Way, San Francisco, CA 94158 âœ…
```

### ç¤ºä¾‹ 2: San Francisco County Fair Building
```
åŽŸå§‹ï¼ˆé”™è¯¯ï¼‰: San Francisco County Fair Building1199 9th, AveSan Francisco, CA 94122
æå–åˆ°3ä¸ªéƒ¨åˆ†:
  [0] San Francisco County Fair Building
  [1] 1199 9th Ave
  [2] San Francisco, CA 94122
ç»„åˆç»“æžœ: San Francisco County Fair Building 1199 9th Ave, San Francisco, CA 94122 âœ…
```

### ç¤ºä¾‹ 3: åªæœ‰ä¸¤ä¸ªéƒ¨åˆ†
```
æå–åˆ°2ä¸ªéƒ¨åˆ†:
  [0] 1199 9th Ave
  [1] San Francisco, CA 94122
ç»„åˆç»“æžœ: 1199 9th Ave, San Francisco, CA 94122 âœ…
```

## ðŸš€ å¦‚ä½•æµ‹è¯•

### 1. æµ‹è¯•æ–°æŠ“å–çš„æ•°æ®

è¿è¡Œ Eventbrite çˆ¬è™«ï¼š

```bash
npm run scrape-eventbrite
```

### 2. æ£€æŸ¥æŠ“å–ç»“æžœ

æŸ¥çœ‹æœ€æ–°æŠ“å–çš„å‡ ä¸ªåœ°å€ï¼š

```bash
sqlite3 data/events.db "SELECT location FROM events WHERE source = 'eventbrite' ORDER BY id DESC LIMIT 10"
```

**é¢„æœŸæ ¼å¼**ï¼š
```
âœ… Thrive City 1 Warriors Way, San Francisco, CA 94158
âœ… SAP Center 525 West Santa Clara Street, San Jose, CA 95113
âœ… Wildseed 855 El Camino Real #Building 4, Palo Alto, CA 94301
```

æ‰€æœ‰åœ°å€éƒ½åº”è¯¥ç¬¦åˆï¼š`åœºé¦†/è¡—é“åœ°å€, åŸŽå¸‚, å·ž é‚®ç¼–`

### 3. éªŒè¯æ ¼å¼æ­£ç¡®æ€§

æ£€æŸ¥ï¼š
- âœ… åœºé¦†åå’Œé—¨ç‰Œå·ä¹‹é—´æœ‰ç©ºæ ¼
- âœ… è¡—é“åœ°å€å’ŒåŸŽå¸‚ä¹‹é—´æœ‰ ", "ï¼ˆé€—å·+ç©ºæ ¼ï¼‰
- âœ… åŸŽå¸‚, å·ž, é‚®ç¼–æ ¼å¼æ­£ç¡®
- âŒ ä¸åº”è¯¥æœ‰é”™è¯¯çš„é€—å·ï¼ˆå¦‚é—¨ç‰Œå·åŽé¢ï¼‰

## ðŸ’¡ ä¼˜åŠ¿

### ç›¸æ¯”ä¹‹å‰çš„æ­£åˆ™è¡¨è¾¾å¼æ–¹æ¡ˆï¼š

âœ… **æ›´å‡†ç¡®**
- ç›´æŽ¥ä½¿ç”¨ Eventbrite çš„ HTML ç»“æž„
- ä¸éœ€è¦çŒœæµ‹æ ¼å¼

âœ… **æ›´ç®€å•**
- ä¸ä¾èµ–å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼
- ä¸éœ€è¦ç»´æŠ¤åŸŽå¸‚åˆ—è¡¨

âœ… **æ›´å¯é **
- é€‚åº”æ€§å¼º
- å³ä½¿ Eventbrite ç•¥å¾®æ”¹å˜æ ¼å¼ï¼Œåªè¦ HTML ç»“æž„ä¸å˜å°±èƒ½å·¥ä½œ

âœ… **ä»Žæºå¤´è§£å†³**
- æ–°æŠ“å–çš„æ•°æ®ç›´æŽ¥æ˜¯æ­£ç¡®æ ¼å¼
- ä¸éœ€è¦åŽæœŸä¿®å¤æ•°æ®åº“

## ðŸ”§ å¦‚æžœé‡åˆ°é—®é¢˜

### åœ°å€ä»ç„¶æ ¼å¼é”™è¯¯ï¼Ÿ

å¯èƒ½çš„åŽŸå› ï¼š
1. **HTML ç»“æž„å˜åŒ–**ï¼šEventbrite å¯èƒ½æ›´æ–°äº†é¡µé¢ç»“æž„
2. **å­å…ƒç´ æå–å¤±è´¥**ï¼šå¯èƒ½éœ€è¦è°ƒæ•´é€‰æ‹©å™¨

**è°ƒè¯•æ–¹æ³•**ï¼š
- æŸ¥çœ‹å®žé™…çš„ HTML ç»“æž„
- åœ¨ä»£ç ä¸­æ·»åŠ  console.log è¾“å‡º `parts` æ•°ç»„
- æŸ¥çœ‹æå–åˆ°äº†å‡ ä¸ªéƒ¨åˆ†ï¼Œå†…å®¹æ˜¯ä»€ä¹ˆ

### éƒ¨åˆ†åœ°å€æ ¼å¼æ­£ç¡®ï¼Œéƒ¨åˆ†ä¸æ­£ç¡®ï¼Ÿ

è¿™æ˜¯æ­£å¸¸çš„ï¼è¯´æ˜Žï¼š
- æ–¹æ³•1å’Œæ–¹æ³•2å¯¹å¤§éƒ¨åˆ†åœ°å€æœ‰æ•ˆ
- å°‘æ•°ç‰¹æ®Šæ ¼å¼ä¼šä½¿ç”¨æ–¹æ³•3ï¼ˆåŽå¤‡æ–¹æ¡ˆï¼‰

**è§£å†³æ–¹æ³•**ï¼š
- å¯ä»¥é’ˆå¯¹ç‰¹æ®Šæ ¼å¼æ·»åŠ é¢å¤–çš„å¤„ç†é€»è¾‘
- æˆ–è€…åœ¨æ–¹æ³•3ä¸­æ·»åŠ ç®€å•çš„æ¸…ç†è§„åˆ™

## ðŸ“ åŽç»­æ­¥éª¤

1. **æµ‹è¯•æ–°æŠ“å–**ï¼šè¿è¡Œ `npm run scrape-eventbrite`
2. **æ£€æŸ¥ç»“æžœ**ï¼šæŸ¥çœ‹æ•°æ®åº“ä¸­çš„åœ°å€æ ¼å¼
3. **åé¦ˆé—®é¢˜**ï¼šå¦‚æžœè¿˜æœ‰æ ¼å¼é—®é¢˜ï¼Œæä¾›å…·ä½“ç¤ºä¾‹
4. **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®å®žé™…æƒ…å†µè°ƒæ•´æå–é€»è¾‘

## ðŸŽ‰ æ€»ç»“

æ–¹æ¡ˆ A å·²ç»å®žçŽ°ï¼è¿™ä¸ªæ–¹æ¡ˆï¼š
- âœ… é‡‡ç”¨äº†ä½ çš„å»ºè®®ï¼ˆåˆ†åˆ«æå–å…ƒç´ ï¼‰
- âœ… ä½¿ç”¨æ­£ç¡®çš„åˆ†éš”ç¬¦ç»„åˆ
- âœ… ä»Žæºå¤´ä¿è¯æ ¼å¼æ­£ç¡®
- âœ… ä¸éœ€è¦ä¿®å¤çŽ°æœ‰æ•°æ®åº“ï¼ˆæœªæ¥æ•°æ®è‡ªåŠ¨æ­£ç¡®ï¼‰

çŽ°åœ¨å¯ä»¥æµ‹è¯•æ–°çš„çˆ¬è™«äº†ï¼å¦‚æžœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ã€‚

---

å®žçŽ°æ—¥æœŸï¼š2025-11-20
æ–¹æ³•ï¼šåŸºäºŽå…ƒç´ æå– + æ™ºèƒ½ç»„åˆ
çŠ¶æ€ï¼šâœ… å·²å®žçŽ°å¹¶æäº¤
