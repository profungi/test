# ğŸ¯ Bay Area Events Scraper

ä¸€ä¸ªæ™ºèƒ½åŒ–çš„æ¹¾åŒºæ´»åŠ¨æŠ“å–å™¨ï¼Œä¸“ä¸ºå°çº¢ä¹¦å‘å¸ƒä¼˜åŒ–ã€‚é‡‡ç”¨AIé©±åŠ¨çš„ä¸¤æ­¥å¼å·¥ä½œæµï¼šå…ˆæŠ“å–åˆ†ç±»ï¼Œå†äººå·¥å®¡æ ¸ç”Ÿæˆå†…å®¹ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ•·ï¸ **å¤šæºæŠ“å–**: Eventbrite, SF Station, DoTheBay ä¸‰å¤§å¹³å°
- ğŸ¤– **AIæ™ºèƒ½åˆ†ç±»**: è‡ªåŠ¨è¯†åˆ«æ´»åŠ¨ç±»å‹å’Œä¼˜å…ˆçº§æ’åº
- ğŸ‘ï¸ **äººå·¥å®¡æ ¸**: ç”Ÿæˆå€™é€‰åˆ—è¡¨ä¾›æ‰‹åŠ¨é€‰æ‹©ï¼Œç¡®ä¿å†…å®¹è´¨é‡
- ğŸ”— **æ™ºèƒ½çŸ­é“¾**: ä»…ä¸ºé€‰ä¸­æ´»åŠ¨ç”Ÿæˆ Short.io çŸ­é“¾æ¥ï¼Œæ”¯æŒè‡ªåŠ¨é‡è¯•
- ğŸŒ **AIç¿»è¯‘ä¼˜åŒ–**: ä¸“ä¸šçš„ä¸­æ–‡å†…å®¹ç¿»è¯‘å’Œå°çº¢ä¹¦æ ¼å¼é€‚é…
- ğŸ“… **ç²¾å‡†æ—¶é—´è¿‡æ»¤**: åªæŠ“å–ä¸‹å‘¨ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰çš„æ´»åŠ¨
- ğŸ”„ **æ™ºèƒ½å»é‡**: ç»Ÿä¸€URLå’Œå†…å®¹ç‰¹å¾ç”Ÿæˆï¼Œæ”¯æŒæ•°æ®åº“çº§å»é‡
- ğŸ¯ **æ´»åŠ¨æè¿°**: æ”¯æŒ40+ç§ç‰¹å¾æå– + 23ç±»å…³é”®è¯æ™ºèƒ½å…œåº•
- ğŸ’¬ **è‡ªåŠ¨ç§è‰**: ä¸ºæ¯ä¸ªæ´»åŠ¨è‡ªåŠ¨æ·»åŠ å¸å¼•åŠ›è¯æœ¯
- â° **GitHub Actions**: æ¯å‘¨ä¸‰è‡ªåŠ¨æŠ“å–ï¼Œç”Ÿæˆå¾…å®¡æ ¸æ–‡ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
bay-area-events-scraper/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js                  # ä¸»å…¥å£å’Œå‘½ä»¤è·¯ç”±
â”‚   â”œâ”€â”€ scrape-events.js          # ç¬¬ä¸€æ­¥ï¼šæŠ“å–å’Œåˆ†ç±»
â”‚   â”œâ”€â”€ generate-post.js          # ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå‘å¸ƒå†…å®¹
â”‚   â”œâ”€â”€ config.js                 # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ scrapers/                 # çˆ¬è™«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ base-scraper.js       # åŸºç¡€çˆ¬è™«ç±»
â”‚   â”‚   â”œâ”€â”€ eventbrite-scraper.js # Eventbriteçˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ sfstation-scraper.js  # SF Stationçˆ¬è™«
â”‚   â”‚   â””â”€â”€ dothebay-scraper.js   # DoTheBayçˆ¬è™«
â”‚   â”œâ”€â”€ utils/                    # æ ¸å¿ƒå·¥å…·
â”‚   â”‚   â”œâ”€â”€ database.js           # SQLiteæ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ai-classifier.js      # AIæ´»åŠ¨åˆ†ç±»å™¨
â”‚   â”‚   â”œâ”€â”€ manual-review.js      # äººå·¥å®¡æ ¸ç®¡ç†
â”‚   â”‚   â””â”€â”€ url-shortener.js      # Short.ioçŸ­é“¾æ¥
â”‚   â””â”€â”€ formatters/               # å†…å®¹ç”Ÿæˆ
â”‚       â”œâ”€â”€ translator.js         # AIç¿»è¯‘å™¨
â”‚       â””â”€â”€ post-generator.js     # å°çº¢ä¹¦å†…å®¹ç”Ÿæˆ
â”œâ”€â”€ data/                         # æ•°æ®å­˜å‚¨
â”œâ”€â”€ output/                       # è¾“å‡ºæ–‡ä»¶
â”œâ”€â”€ .github/workflows/            # è‡ªåŠ¨åŒ–
â””â”€â”€ validate.js                   # ç¯å¢ƒéªŒè¯
```

## ğŸ”„ å·¥ä½œæµç¨‹

### ä¸¤æ­¥å¼å¤„ç†æµç¨‹

```mermaid
graph TD
    A[å¼€å§‹] --> B[ç¬¬ä¸€æ­¥: æŠ“å–åˆ†ç±»]
    B --> C[å¹¶è¡ŒæŠ“å–3ä¸ªæ•°æ®æº]
    C --> D[AIåˆ†ç±»å’Œä¼˜å…ˆçº§æ’åº]
    D --> E[å»é‡å’Œæ•°æ®éªŒè¯]
    E --> F[ç”Ÿæˆå®¡æ ¸æ–‡ä»¶ JSON]
    F --> G[äººå·¥å®¡æ ¸å’Œé€‰æ‹©]
    G --> H[ç¬¬äºŒæ­¥: å†…å®¹ç”Ÿæˆ]
    H --> I[ç”ŸæˆçŸ­é“¾æ¥]
    I --> J[AIç¿»è¯‘ä¼˜åŒ–]
    J --> K[ç”Ÿæˆå°çº¢ä¹¦æ ¼å¼]
    K --> L[å®Œæˆ]
```

## å®‰è£…ä¸é…ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd bay-area-events-scraper
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶å¡«å…¥APIå¯†é’¥ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# Short.io API (ç”¨äºç”ŸæˆçŸ­é“¾æ¥)
SHORTIO_API_KEY=your_shortio_api_key_here

# AIæä¾›å•†é€‰æ‹© (openai, gemini, claude)
AI_PROVIDER=openai

# AI APIå¯†é’¥ (è‡³å°‘é…ç½®ä¸€ä¸ª)
OPENAI_API_KEY=your_openai_api_key_here
GEMINI_API_KEY=your_gemini_api_key_here  
CLAUDE_API_KEY=your_claude_api_key_here
```

### 4. é…ç½® GitHub Secrets (ç”¨äºè‡ªåŠ¨åŒ–)

åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š

- `SHORTIO_API_KEY`: Short.io API å¯†é’¥
- `AI_PROVIDER`: AIæä¾›å•†é€‰æ‹© (openai, gemini, claude)
- è‡³å°‘ä¸€ä¸ªAI APIå¯†é’¥ï¼š
  - `OPENAI_API_KEY`: OpenAI API å¯†é’¥
  - `GEMINI_API_KEY`: Google Gemini API å¯†é’¥
  - `CLAUDE_API_KEY`: Anthropic Claude API å¯†é’¥

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹

```bash
# 1. éªŒè¯ç¯å¢ƒé…ç½®
npm run validate

# 2. ç¬¬ä¸€æ­¥ï¼šæŠ“å–æ´»åŠ¨å¹¶ç”Ÿæˆå®¡æ ¸æ–‡ä»¶
npm run scrape
# æˆ–æŒ‡å®šAIæä¾›å•†ï¼š
npm run scrape -- --ai-provider gemini
# ğŸ“ è¾“å‡ºï¼š./output/review_YYYY-MM-DD_HHMM.json

# 3. äººå·¥å®¡æ ¸ï¼šç¼–è¾‘JSONæ–‡ä»¶
# ğŸ”§ æ‰“å¼€å®¡æ ¸æ–‡ä»¶ï¼Œå°†è¦å‘å¸ƒçš„æ´»åŠ¨çš„ "selected" æ”¹ä¸º true
# ğŸ’¡ æç¤ºï¼šç³»ç»Ÿä¼šæä¾›15-20ä¸ªå€™é€‰æ´»åŠ¨ä¾›ä½ é€‰æ‹©

# 4. ç¬¬äºŒæ­¥ï¼šç”Ÿæˆæœ€ç»ˆå‘å¸ƒå†…å®¹ï¼ˆä½¿ç”¨å®é™…æ–‡ä»¶è·¯å¾„ï¼‰
npm run generate-post "./output/review_2024-09-19_1430.json"
# æˆ–æŒ‡å®šAIæä¾›å•†ï¼š
npm run generate-post "./output/review_2024-09-19_1430.json" --ai-provider claude
# ğŸ“± è¾“å‡ºï¼š./output/weekly_events_YYYY-MM-DD_HHMM.txt

# 5. å¤åˆ¶å†…å®¹åˆ°å°çº¢ä¹¦å‘å¸ƒï¼
```

### ğŸ¤– AIæä¾›å•†é€‰æ‹©

ç³»ç»Ÿæ”¯æŒä¸‰ç§AIæœåŠ¡ï¼Œæä¾›æ™ºèƒ½åˆ†ç±»å’Œç¿»è¯‘åŠŸèƒ½ï¼š

#### **OpenAI GPT** (é»˜è®¤)
- **æ¨¡å‹**: gpt-3.5-turbo  
- **ä¼˜åŠ¿**: ç¨³å®šå¯é ï¼Œä¸­æ–‡æ”¯æŒå¥½
- **API**: éœ€è¦ `OPENAI_API_KEY`

#### **Google Gemini**
- **æ¨¡å‹**: gemini-1.5-flash
- **ä¼˜åŠ¿**: é€Ÿåº¦å¿«ï¼Œæˆæœ¬ä½  
- **API**: éœ€è¦ `GEMINI_API_KEY`

#### **Anthropic Claude**
- **æ¨¡å‹**: claude-3-haiku-20240307
- **ä¼˜åŠ¿**: ç†è§£èƒ½åŠ›å¼ºï¼Œè¾“å‡ºè´¨é‡é«˜
- **API**: éœ€è¦ `CLAUDE_API_KEY`

#### **é€‰æ‹©æ–¹å¼**:
1. **ç¯å¢ƒå˜é‡**: è®¾ç½® `AI_PROVIDER=gemini`
2. **å‘½ä»¤è¡Œå‚æ•°**: `--ai-provider claude`
3. **è‡ªåŠ¨æ•…éšœè½¬ç§»**: å½“å‰æä¾›å•†å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æä¾›å•†

### è¯¦ç»†æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šæŠ“å–å’Œåˆ†ç±»

```bash
npm run scrape
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- ğŸ•·ï¸ å¹¶è¡ŒæŠ“å– Eventbrite, SF Station, DoTheBay
- ğŸ¤– AIåˆ†ç±»æ´»åŠ¨ç±»å‹å’Œè®¾ç½®ä¼˜å…ˆçº§
- ğŸ”„ æ™ºèƒ½å»é‡å¤„ç†
- ğŸ“„ ç”Ÿæˆå®¡æ ¸æ–‡ä»¶ `output/review_YYYY-MM-DD_HHMM.json`

#### ç¬¬äºŒæ­¥ï¼šäººå·¥å®¡æ ¸å’Œé€‰æ‹©

**1. æ‰¾åˆ°å®¡æ ¸æ–‡ä»¶**
æŠ“å–å®Œæˆåï¼ŒæŸ¥çœ‹è¾“å‡ºä¿¡æ¯æ‰¾åˆ°ç”Ÿæˆçš„å®¡æ ¸æ–‡ä»¶è·¯å¾„ï¼š
```
âœ… å®¡æ ¸æ–‡ä»¶å·²ç”Ÿæˆ: ./output/review_2024-09-19_1430.json
```

**2. ç¼–è¾‘å®¡æ ¸æ–‡ä»¶**
ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€JSONæ–‡ä»¶ï¼š
```bash
# ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨æ‰“å¼€
code ./output/review_2024-09-19_1430.json
# æˆ–è€…
vim ./output/review_2024-09-19_1430.json
```

**3. é€‰æ‹©è¦å‘å¸ƒçš„æ´»åŠ¨**
æ‰¾åˆ°ä½ æƒ³è¦å‘å¸ƒçš„æ´»åŠ¨ï¼Œå°† `"selected"` æ”¹ä¸º `true`ï¼š

```json
{
  "id": 1,
  "selected": true,  // â† æ”¹ä¸º true æ¥é€‰æ‹©æ­¤æ´»åŠ¨
  "title": "Ferry Building Farmers Market",
  "time_display": "Saturday 12/25 9:00 AM - 2:00 PM", 
  "location": "Ferry Building Marketplace",
  "price": "Free",
  "event_type": "market",
  "priority": 10,
  "chinese_relevant": true,
  "original_url": "https://...",
  // ... å…¶ä»–å­—æ®µ
}
```

**4. ä¿å­˜æ–‡ä»¶**
é€‰æ‹©å®Œæˆåä¿å­˜JSONæ–‡ä»¶ã€‚

#### ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆæœ€ç»ˆå‘å¸ƒå†…å®¹

**è¿è¡Œç”Ÿæˆå‘½ä»¤**ï¼ˆä½¿ç”¨ä½ ç¼–è¾‘çš„å®¡æ ¸æ–‡ä»¶è·¯å¾„ï¼‰ï¼š
```bash
npm run generate-post "./output/review_2024-09-19_1430.json"
```

**å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹**ï¼š
1. ğŸ” è¯»å–ä½ çš„é€‰æ‹©ï¼ˆåªå¤„ç† selected: true çš„æ´»åŠ¨ï¼‰
2. ğŸ”— ä¸ºé€‰ä¸­æ´»åŠ¨ç”Ÿæˆ Short.io çŸ­é“¾æ¥  
3. ğŸŒ AIç¿»è¯‘æ ‡é¢˜ã€æè¿°åˆ°ä¸­æ–‡
4. ğŸ“± ç”Ÿæˆå°çº¢ä¹¦æ ¼å¼çš„å‘å¸ƒå†…å®¹
5. ğŸ“„ ä¿å­˜åˆ° `./output/weekly_events_XXXX.txt`

**ç”Ÿæˆå®Œæˆå**ï¼š
```
âœ… å†…å®¹ç”Ÿæˆå®Œæˆï¼
ğŸ“„ å‘å¸ƒå†…å®¹: ./output/weekly_events_2024-09-19_1430.txt
ğŸ“± ç°åœ¨å¯ä»¥å¤åˆ¶å†…å®¹åˆ°å°çº¢ä¹¦å‘å¸ƒäº†ï¼
```

**5. å¤åˆ¶åˆ°å°çº¢ä¹¦**
æ‰“å¼€ç”Ÿæˆçš„ `.txt` æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ï¼Œç²˜è´´åˆ°å°çº¢ä¹¦å‘å¸ƒæ¡†å³å¯ï¼

### GitHub Actions è‡ªåŠ¨åŒ–

é¡¹ç›®é…ç½®äº†æ¯å‘¨ä¸‰ UTC 10:00ï¼ˆPST 2:00 AMï¼‰è‡ªåŠ¨æŠ“å–ï¼š

1. **è‡ªåŠ¨è¿è¡Œ**: æ¯å‘¨ä¸‰è‡ªåŠ¨ç”Ÿæˆå®¡æ ¸æ–‡ä»¶
2. **æ‰‹åŠ¨è§¦å‘**: åœ¨ Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œ
3. **ä¸‹è½½æ–‡ä»¶**: ä» Artifacts ä¸‹è½½å®¡æ ¸æ–‡ä»¶
4. **æœ¬åœ°å¤„ç†**: å®¡æ ¸åæœ¬åœ°è¿è¡Œç”Ÿæˆå‘½ä»¤

## ğŸ“ å‘½ä»¤å‚è€ƒ

### ä¸»è¦å‘½ä»¤

#### 1. æŠ“å–æ´»åŠ¨ï¼ˆä¸»è¦åŠŸèƒ½ï¼‰
```bash
npm run scrape
```
- ä»ä¸‰ä¸ªç½‘ç«™æŠ“å–æ´»åŠ¨ï¼ˆEventbrite, SFStation, DoTheBayï¼‰
- AIåˆ†ç±»å’Œå»é‡
- ç”Ÿæˆ review JSON æ–‡ä»¶åœ¨ `output/` ç›®å½•

#### 2. ä½¿ç”¨ä¸åŒAIæä¾›å•†
```bash
npm run scrape -- --ai-provider openai   # ä½¿ç”¨OpenAI (é»˜è®¤)
npm run scrape -- --ai-provider gemini   # ä½¿ç”¨Google Gemini
npm run scrape -- --ai-provider claude   # ä½¿ç”¨Claude
```

#### 3. ç”Ÿæˆæ–‡ç« ï¼ˆåœ¨å®¡æ ¸åï¼‰
```bash
npm run generate-post output/review_YYYY-MM-DD_HHMM.json
```
- æ ¹æ®å®¡æ ¸åçš„JSONç”Ÿæˆæœ€ç»ˆæ–‡ç« 
- è¾“å‡ºMarkdownæ ¼å¼

#### 4. æŸ¥çœ‹å¸®åŠ©
```bash
npm run scrape -- --help
```

### è°ƒè¯•å‘½ä»¤

#### æŸ¥çœ‹æŠ“å–é”™è¯¯
```bash
npm run scrape 2>&1 | grep -i "error\|invalid\|failed"
```

#### æŸ¥çœ‹ç‰¹å®šç½‘ç«™çš„æ—¥å¿—
```bash
npm run scrape 2>&1 | grep "DoTheBay"
npm run scrape 2>&1 | grep "SFStation"
npm run scrape 2>&1 | grep "Eventbrite"
```

#### æŸ¥çœ‹æ—¶é—´å¤„ç†æ—¥å¿—
```bash
npm run scrape 2>&1 | grep -E "Invalid time|normalize|parseTime"
```

### æ•°æ®æµç¨‹

```
npm run scrape
  â†“
1. æŠ“å– (Eventbrite + SFStation + DoTheBay) â†’ ~83 events
  â†“
2. URLå»é‡ + å†…å®¹å»é‡ â†’ ~23 events
  â†“
3. AIåˆ†ç±» (æ··åˆç­–ç•¥) â†’ 23 classified events
  â†“
4. è¿‡æ»¤éŸ³ä¹æ´»åŠ¨ + é€‰æ‹©topå€™é€‰ â†’ ~22 candidates
  â†“
5. ç”Ÿæˆ review_*.json æ–‡ä»¶
  â†“
æ‰‹å·¥å®¡æ ¸ (ä¿®æ”¹ "selected": true)
  â†“
npm run generate-post review_*.json
  â†“
ç”Ÿæˆæœ€ç»ˆæ–‡ç« 
```

## ğŸ“„ è¾“å‡ºæ–‡ä»¶

### ç¬¬ä¸€æ­¥è¾“å‡ºï¼ˆæŠ“å–é˜¶æ®µï¼‰

```
output/
â”œâ”€â”€ review_2024-09-19_1430.json    # å¾…å®¡æ ¸çš„æ´»åŠ¨åˆ—è¡¨
â””â”€â”€ data/events.db                 # SQLiteæ•°æ®åº“ï¼ˆå†å²è®°å½•ï¼‰
```

**å®¡æ ¸æ–‡ä»¶ç»“æ„**ï¼š
```json
{
  "review_id": "review_2024-09-19_1430_abc",
  "target_week": "2024-09-23_to_2024-09-29", 
  "stats": {
    "total_candidates": 18,
    "by_type": {"market": 5, "festival": 3, "food": 4},
    "chinese_relevant": 7
  },
  "events": [
    {
      "id": 1,
      "selected": false,  // â† æ”¹ä¸º true æ¥é€‰æ‹©
      "title": "Ferry Building Farmers Market",
      "time_display": "Saturday 12/25 9:00 AM - 2:00 PM",
      "location": "Ferry Building Marketplace",
      "price": "Free",
      "event_type": "market",
      "priority": 10,
      "original_url": "https://...",
      // ... æ›´å¤šå­—æ®µ
    }
  ]
}
```

### ç¬¬äºŒæ­¥è¾“å‡ºï¼ˆå†…å®¹ç”Ÿæˆï¼‰

```
output/
â”œâ”€â”€ weekly_events_2024-09-19_1430.txt        # å°çº¢ä¹¦å‘å¸ƒå†…å®¹
â”œâ”€â”€ weekly_events_2024-09-19_1430_metadata.json  # è¯¦ç»†å…ƒæ•°æ®
â””â”€â”€ review_2024-09-19_1430.json              # åŸå®¡æ ¸æ–‡ä»¶
```

**å°çº¢ä¹¦å†…å®¹ç¤ºä¾‹**ï¼š
```text
ğŸ‰ æœ¬å‘¨æ¹¾åŒºç²¾å½©æ´»åŠ¨ 9.23-9.29

ğŸ“… æ¸¡è½®å¤§å¦å†œå¤«å¸‚é›† (Ferry Building Farmers Market)
ğŸ•’ å‘¨å…­ 12/25 ä¸Šåˆ9ç‚¹-ä¸‹åˆ2ç‚¹
ğŸ“ æ¸¡è½®å¤§å¦å¸‚åœº (Ferry Building Marketplace) 
ğŸ’° å…è´¹
ğŸ“ æ–°é²œæœ‰æœºå†œäº§å“å¥½ç‰©
ğŸ”— https://short.io/abc123

ğŸ“… ç¡…è°·ç§‘æŠ€éŸ³ä¹èŠ‚ (Silicon Valley Tech Music Fest)
ğŸ•’ å‘¨æ—¥ 12/26 ä¸‹åˆ3ç‚¹-æ™šä¸Š10ç‚¹
ğŸ“ å±±æ™¯åŸåœ†å½¢å‰§åœº (Mountain View Amphitheatre)
ğŸ’° $45-85 (çº¦Â¥315-595)
ğŸ“ ç§‘æŠ€ä¸éŸ³ä¹å®Œç¾ç»“åˆ
ğŸ”— https://short.io/def456

#æ¹¾åŒºç”Ÿæ´» #æ—§é‡‘å±± #ç¡…è°· #æ´»åŠ¨æ¨è #å‘¨æœ«å»å“ªå„¿ #å†œå¤«å¸‚é›†
```

## âš™ï¸ é…ç½®è¯´æ˜

### æ ¸å¿ƒé…ç½® (`src/config.js`)

```javascript
// äº‹ä»¶æºï¼ˆå½“å‰3ä¸ªï¼‰
eventSources: [
  { name: 'eventbrite', baseUrl: '...', priority: 1 },
  { name: 'sfstation', baseUrl: '...', priority: 1 },  
  { name: 'dothebay', baseUrl: '...', priority: 1 }
]

// æ´»åŠ¨ç±»å‹ä¼˜å…ˆçº§
eventTypePriority: {
  market: 10,     // å¸‚é›† - æœ€é«˜ä¼˜å…ˆçº§
  fair: 10,       // åšè§ˆä¼š
  festival: 10,   // èŠ‚åº†
  food: 7,        // ç¾é£Ÿ
  music: 7,       // éŸ³ä¹
  free: 5,        // å…è´¹æ´»åŠ¨
  default: 3      // å…¶ä»–
}

// åœ°ç†ä½ç½®è¿‡æ»¤ - é‡ç‚¹ï¼šSFã€å—æ¹¾ã€åŠå²›
locations: {
  // æœ€é«˜ä¼˜å…ˆçº§ - SFã€å—æ¹¾æ ¸å¿ƒã€åŠå²›æ ¸å¿ƒ
  primary: [
    'San Francisco', 'SF', 'SOMA', 'Mission', 'Castro',           // æ—§é‡‘å±±
    'San Jose', 'Santa Clara', 'Sunnyvale', 'Mountain View',     // å—æ¹¾æ ¸å¿ƒ
    'Palo Alto', 'Cupertino',                                   
    'Redwood City', 'Menlo Park', 'San Mateo', 'Foster City'    // åŠå²›æ ¸å¿ƒ
  ],
  
  // æ¬¡è¦ä¼˜å…ˆçº§ - å…¶ä»–æ¹¾åŒºåŸå¸‚
  secondary: [
    'Fremont', 'Milpitas', 'Campbell', 'Los Gatos',            // å—æ¹¾å…¶ä»–
    'Burlingame', 'San Carlos', 'Millbrae',                    // åŠå²›å…¶ä»–
    'Oakland', 'Berkeley', 'Alameda'                           // ä¸œæ¹¾ï¼ˆè¾ƒä½ä¼˜å…ˆçº§ï¼‰
  ],
  
  keywords: ['Bay Area', 'Silicon Valley', 'Peninsula', 'South Bay']
}

// æŠ“å–é™åˆ¶
scraping: {
  maxEventsPerSource: 50,          // æ¯ä¸ªæºæœ€å¤šæŠ“å–æ•°é‡
  totalCandidatesForReview: 20,    // æœ€ç»ˆå€™é€‰æ•°é‡ï¼ˆä½ çš„è¦æ±‚15-20ä¸ªï¼‰
  requestDelay: 1000               // è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰
}
```

## æ•°æ®æµç¨‹

1. **æŠ“å–é˜¶æ®µ**: ä»å„ä¸ªç½‘ç«™æŠ“å–æ´»åŠ¨æ•°æ®
2. **éªŒè¯é˜¶æ®µ**: æ£€æŸ¥æ´»åŠ¨çš„æ—¶é—´ã€åœ°ç‚¹ã€æœ‰æ•ˆæ€§
3. **å»é‡é˜¶æ®µ**: ç»Ÿä¸€ç”ŸæˆURL+å†…å®¹ç‰¹å¾é”®ï¼Œæ”¯æŒæ•°æ®åº“çº§å»é‡
4. **å­˜å‚¨é˜¶æ®µ**: ä¿å­˜åˆ° SQLite æ•°æ®åº“
5. **åˆ†ç±»é˜¶æ®µ**: AIåˆ†ç±»å’Œä¼˜å…ˆçº§æ’åº
6. **æ ¼å¼åŒ–é˜¶æ®µ**:
   - ç¿»è¯‘æ ‡é¢˜å’Œæè¿°åˆ°ä¸­æ–‡
   - æ™ºèƒ½æå–æ´»åŠ¨ç‰¹å¾ï¼ˆ40+ç§ï¼‰
   - ä¸ºç‰¹å¾ä¸è¶³çš„æ´»åŠ¨æ™ºèƒ½å…œåº•ï¼ˆ23ç±»å…³é”®è¯ï¼‰
   - è‡ªåŠ¨æ·»åŠ ç§è‰è¯æœ¯
7. **çŸ­é“¾æ¥ç”Ÿæˆ**: æ”¯æŒè‡ªåŠ¨é‡è¯•ï¼Œé‡åˆ°è·¯å¾„å†²çªè‡ªåŠ¨é‡æ–°ç”Ÿæˆ
8. **è¾“å‡ºé˜¶æ®µ**: ç”Ÿæˆæœ€ç»ˆçš„å°çº¢ä¹¦æ ¼å¼æ–‡æœ¬

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„æ”¹è¿› (Oct 2024)

æœ€è¿‘ä¸€æ¬¡é‡æ„ä¼˜åŒ–äº†4ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæ˜¾è‘—æå‡ä»£ç è´¨é‡å’ŒåŠŸèƒ½ï¼š

### 1. å»é‡é€»è¾‘ä¼˜åŒ–
- **æ”¹è¿›**: ç»Ÿä¸€ä½¿ç”¨ `generateEventKey()` ç”Ÿæˆå”¯ä¸€é”®
- **ç­–ç•¥**: URLä¼˜å…ˆï¼Œå¦åˆ™ä½¿ç”¨ title+time(å°æ—¶)+location
- **æ•ˆæœ**: åµŒå¥—å±‚çº§ 5å±‚ â†’ 2-3å±‚ï¼Œå¯æµ‹è¯•æ€§æå‡ â­â­â­â­â­

### 2. AI Providerè‡ªåŠ¨åˆ‡æ¢
- **æ”¹è¿›**: ä»é€’å½’åˆ‡æ¢æ”¹ä¸ºè¿­ä»£ï¼Œåˆ é™¤42è¡Œå¤æ‚ä»£ç 
- **ç‰¹ç‚¹**: ä¸ä¿®æ”¹å®ä¾‹çŠ¶æ€ï¼Œæ›´æ¸…æ™°çš„ä¼˜å…ˆçº§ç®¡ç†
- **æ•ˆæœ**: é¿å…æ— é™é€’å½’é£é™©ï¼Œå®‰å…¨æ€§æå‡ â­â­â­â­â­

### 3. URLçŸ­é“¾æ¥é‡è¯•
- **æ”¹è¿›**: è‡ªå®šä¹‰é”™è¯¯åˆ†ç±» (RetryableError)ï¼Œæå–é”™è¯¯å¤„ç†é€»è¾‘
- **ç‰¹ç‚¹**: è·¯å¾„å†²çªè‡ªåŠ¨é‡è¯•ï¼Œè®¤è¯é”™è¯¯ç›´æ¥å¤±è´¥
- **æ•ˆæœ**: åµŒå¥—å±‚çº§ 5å±‚ â†’ 2-3å±‚ï¼Œä»£ç è¡Œæ•° -10%

### 4. æ´»åŠ¨æè¿°ç”Ÿæˆ (æ ¸å¿ƒæ”¹è¿›)
- **æ”¹è¿›**: ä»6ä¸ªç‰¹æ®ŠèŠ‚æ—¥â†’40+é€šç”¨ç‰¹å¾+23å…³é”®è¯æ™ºèƒ½å…œåº•
- **æ¶æ„**: ä¸‰å±‚å…œåº• + è‡ªåŠ¨ç§è‰è¯æœ¯
- **è¦†ç›–**: 6ç§ç‰¹æ®Šæ´»åŠ¨ â†’ 40+é€šç”¨+23å…³é”®è¯ (è¦†ç›–é¢10å€æå‡)
- **æ•ˆæœ**: ä»£ç  109è¡Œâ†’16è¡Œ (-85%), å¯ç»´æŠ¤æ€§å¤§å¹…æå‡

æ›´å¤šè¯¦ç»†ä¿¡æ¯è§ `REFACTORING_SUMMARY.md`

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æŠ“å–å¤±è´¥**
- æ£€æŸ¥ç›®æ ‡ç½‘ç«™æ˜¯å¦æ›´æ”¹äº†ç»“æ„
- éªŒè¯ç½‘ç»œè¿æ¥å’Œä»£ç†è®¾ç½®
- æŸ¥çœ‹ GitHub Actions æ—¥å¿—

**2. ç¿»è¯‘APIé”™è¯¯**  
- éªŒè¯ OpenAI API å¯†é’¥
- æ£€æŸ¥ API é…é¢æ˜¯å¦å……è¶³
- ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°æ‰‹åŠ¨ç¿»è¯‘

**3. çŸ­é“¾æ¥ç”Ÿæˆå¤±è´¥**
- éªŒè¯ Short.io API å¯†é’¥  
- æ£€æŸ¥APIé…é¢
- ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§ä½¿ç”¨åŸå§‹é“¾æ¥

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
DEBUG=* npm start

# æŸ¥çœ‹æ•°æ®åº“å†…å®¹
sqlite3 data/events.db ".tables"
sqlite3 data/events.db "SELECT * FROM events LIMIT 10;"
```

## ğŸ§ª æµ‹è¯•

é¡¹ç›®æä¾›äº†ä¸¤ä¸ªå…³é”®çš„å•å…ƒæµ‹è¯•ï¼š

### 1. å»é‡é€»è¾‘æµ‹è¯•
```bash
node test-deduplication.js
```
éªŒè¯ï¼š
- âœ… URLå»é‡ï¼ˆç›¸åŒURLè¯†åˆ«ï¼‰
- âœ… å†…å®¹ç‰¹å¾å»é‡ï¼ˆæ ‡é¢˜+æ—¶é—´+åœ°ç‚¹ï¼‰
- âœ… æ—¶é—´æ ‡å‡†åŒ–ï¼ˆæå–åˆ°å°æ—¶ï¼‰
- âœ… åœ°ç‚¹æ ‡å‡†åŒ–ï¼ˆç»Ÿä¸€å°å†™å’Œç¬¦å·ï¼‰

**æµ‹è¯•ç”¨ä¾‹**: 5ä¸ªè¾“å…¥ â†’ 3ä¸ªå”¯ä¸€è¾“å‡º

### 2. ç¿»è¯‘å™¨æ¨¡å¼åŒ¹é…æµ‹è¯•
```bash
node test-translator-patterns.js
```
éªŒè¯ï¼š
- âœ… Fair/Market/Festivalç±»ç‰¹å¾æå–ï¼ˆ4ä¸ªç”¨ä¾‹ï¼‰
- âœ… æ™ºèƒ½å…œåº•é€»è¾‘ï¼ˆç§‘æŠ€ã€ç‘œä¼½ã€å–œå‰§ã€çƒ¹é¥ªã€è¯»ä¹¦ã€æ‘„å½±ç­‰ï¼‰
- âœ… è‡ªåŠ¨ç§è‰è¯æœ¯ï¼ˆå€¼å¾—ä¸€å»ã€ä¸å®¹é”™è¿‡ç­‰ï¼‰

**æµ‹è¯•è¦†ç›–**: 10ä¸ªä¸åŒç±»å‹çš„æ´»åŠ¨

è¯¦ç»†è¯´æ˜è§ `HOW_TO_TEST.md`

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„äº‹ä»¶æº

1. ç»§æ‰¿ `BaseScraper` ç±»
2. å®ç° `scrape()` æ–¹æ³•
3. åœ¨ `src/index.js` ä¸­æ·»åŠ åˆ° scrapers æ•°ç»„

```javascript
const NewScraper = require('./scrapers/NewScraper');

this.scrapers = [
  new EventbriteScraper(),
  new SFStationScraper(),
  new NewScraper()  // æ·»åŠ æ–°çš„çˆ¬è™«
];
```

### è‡ªå®šä¹‰å†…å®¹æ ¼å¼

ä¿®æ”¹ `src/config.js` ä¸­çš„æ¨¡æ¿ï¼š

```javascript
content: {
  postTemplate: `ä½ çš„è‡ªå®šä¹‰æ¨¡æ¿ {date_range}...`,
  eventTemplate: `ä½ çš„äº‹ä»¶æ¨¡æ¿...`
}
```

## è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

MIT License

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **REFACTORING_SUMMARY.md**: æœ€è¿‘é‡æ„çš„è¯¦ç»†è¯´æ˜ï¼ˆ4ä¸ªæ ¸å¿ƒæ¨¡å—ä¼˜åŒ–ï¼‰
- **HOW_TO_TEST.md**: æµ‹è¯•è¿è¡ŒæŒ‡å—
- **README.md**: æœ¬æ–‡ä»¶ï¼ˆä¸»è¦è¯´æ˜ï¼‰

## ğŸ“Š æ›´æ–°æ—¥å¿—

### 2024å¹´10æœˆ - æ ¸å¿ƒæ¶æ„ä¼˜åŒ–
- âœ… å»é‡é€»è¾‘é‡æ„ï¼šç»Ÿä¸€keyç”Ÿæˆç­–ç•¥
- âœ… AI Provideråˆ‡æ¢ä¼˜åŒ–ï¼šä»é€’å½’æ”¹ä¸ºè¿­ä»£
- âœ… URLçŸ­é“¾æ¥é‡è¯•ä¼˜åŒ–ï¼šæ™ºèƒ½é”™è¯¯åˆ†ç±»
- âœ… æ´»åŠ¨æè¿°ç”Ÿæˆå¤§å¹…æ”¹è¿›ï¼š
  - åˆ é™¤6ä¸ªç‰¹æ®ŠèŠ‚æ—¥é…ç½®ï¼Œæ”¹ä¸º40+é€šç”¨ç‰¹å¾
  - æ·»åŠ 23ç±»å…³é”®è¯æ™ºèƒ½å…œåº•
  - å®ç°è‡ªåŠ¨ç§è‰è¯æœ¯
  - è¦†ç›–é¢æå‡10å€

### 2024å¹´9æœˆ - åˆå§‹ç‰ˆæœ¬
- ğŸ¯ åŸºç¡€çˆ¬è™«æ¡†æ¶
- ğŸ“„ JSONå®¡æ ¸æµç¨‹
- ğŸš€ GitHub Actionsè‡ªåŠ¨åŒ–

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·åˆ›å»º Issue æˆ– Pull Requestã€‚