# ğŸ³ ä½¿ç”¨ Dev Container å¼€å‘

> **è§£å†³é—®é¢˜**: æ¯æ¬¡å»ºæ„æ–°çš„ agent éƒ½è¦ç­‰å¾ˆä¹…ï¼Ÿä½¿ç”¨ Dev Container ä¸€æ¬¡é…ç½®ï¼Œå¿«é€Ÿå¯åŠ¨ï¼

## ğŸ’¡ é‡è¦ï¼šä¸¤ç§ä½¿ç”¨åœºæ™¯ + æ¶æ„å†²çªè§£å†³

è¿™ä¸ª dev container é…ç½®æ”¯æŒä¸¤ç§ä½¿ç”¨åœºæ™¯ï¼š

### 1ï¸âƒ£ Sculptor Agent åŠ é€Ÿï¼ˆäº‘ç«¯ï¼‰â­ **è§£å†³ä½ çš„é—®é¢˜ï¼**

Sculptor ä¼š**è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨** `.devcontainer/` é…ç½®æ¥åŠ é€Ÿ agent å¯åŠ¨ï¼š

- âœ… **ç¬¬ä¸€æ¬¡æ„å»º**: 3-4 åˆ†é’Ÿï¼ˆæ„å»ºå¹¶ç¼“å­˜é•œåƒï¼‰
- âœ… **åç»­å¯åŠ¨**: 1-2 åˆ†é’Ÿï¼ˆä½¿ç”¨ç¼“å­˜ï¼Œå¿« 50-60%ï¼‰
- âœ… **é¢„è£…ç³»ç»Ÿä¾èµ–**: Chromeã€SQLite3 éƒ½åœ¨é•œåƒä¸­
- âœ… **æ— éœ€é…ç½®**: æäº¤åˆ° Git åè‡ªåŠ¨ç”Ÿæ•ˆ

**è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [`.devcontainer/SCULPTOR_OPTIMIZATION.md`](.devcontainer/SCULPTOR_OPTIMIZATION.md)

### 2ï¸âƒ£ æœ¬åœ°å¼€å‘ï¼ˆæ¨èï¼šä¸ä½¿ç”¨å®¹å™¨ï¼‰â­ **æ¨èæ–¹å¼**

**é‡è¦**ï¼šç”±äºæ¶æ„å·®å¼‚ï¼ˆmacOS vs Linuxï¼‰ï¼Œæ¨èæœ¬åœ°å¼€å‘**ä¸ä½¿ç”¨å®¹å™¨**ï¼š

- âœ… **ç½‘ç«™å¼€å‘**: ç›´æ¥åœ¨æœ¬åœ°è¿è¡Œ `npm run dev`ï¼ˆæ— æ¶æ„å†²çªï¼‰
- âœ… **çƒ­é‡è½½å¿«**: åŸç”Ÿ macOS æ€§èƒ½æœ€ä½³
- âœ… **æ— äºŒè¿›åˆ¶å†²çª**: æ‰€æœ‰ node æ¨¡å—éƒ½æ˜¯ macOS ç‰ˆæœ¬
- âœ… **Sculptor ä»ç„¶å¿«**: ä½¿ç”¨ Docker Volumes éš”ç¦»

**å¦‚æœé‡åˆ° `lightningcss.darwin-arm64.node` é”™è¯¯**ï¼š

```bash
# è¿è¡Œä¿®å¤è„šæœ¬
./fix-local-dev.sh

# æˆ–æ‰‹åŠ¨ä¿®å¤
rm -rf node_modules website/node_modules
npm install
cd website && npm install
```

**è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [`.devcontainer/HYBRID_DEVELOPMENT.md`](.devcontainer/HYBRID_DEVELOPMENT.md)

### 3ï¸âƒ£ æœ¬åœ°ä½¿ç”¨ Dev Containerï¼ˆå¯é€‰ï¼Œä»…æµ‹è¯•ï¼‰

åªåœ¨éœ€è¦æµ‹è¯• Linux ç¯å¢ƒæ—¶ä½¿ç”¨ï¼š

- âœ… **Docker Volumes**: node_modules å®Œå…¨éš”ç¦»
- âœ… **ä¸å½±å“æœ¬åœ°**: é€€å‡ºå®¹å™¨åæœ¬åœ°ç¯å¢ƒæ­£å¸¸
- âš ï¸ **ä¸æ¨èæ—¥å¸¸å¼€å‘**: æ€§èƒ½è¾ƒæœ¬åœ°æ…¢

---

## ä»€ä¹ˆæ˜¯ Dev Containerï¼Ÿ

Dev Containerï¼ˆå¼€å‘å®¹å™¨ï¼‰æ˜¯ä¸€ä¸ªé¢„é…ç½®çš„ Docker å®¹å™¨ï¼ŒåŒ…å«äº†é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–å’Œå·¥å…·ã€‚

**å…³é”®ä¼˜åŠ¿**ï¼š
- âœ… **è‡ªåŠ¨åŒ–**: ä¸€æ¬¡é…ç½®ï¼Œåˆ°å¤„è¿è¡Œ
- âœ… **å¯å¤åˆ¶**: å›¢é˜Ÿæˆå‘˜è·å¾—å®Œå…¨ç›¸åŒçš„ç¯å¢ƒ
- âœ… **åŠ é€Ÿå¼€å‘**: å‡å°‘ç¯å¢ƒé…ç½®æ—¶é—´

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### 1. å®‰è£…å‰ç½®å·¥å…·

- [Docker Desktop](https://www.docker.com/products/docker-desktop) - å®¹å™¨è¿è¡Œç¯å¢ƒ
- [VS Code](https://code.visualstudio.com/) - ä»£ç ç¼–è¾‘å™¨
- [Dev Containers æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers) - VS Code æ’ä»¶

### 2. æ‰“å¼€é¡¹ç›®

```bash
# åœ¨ VS Code ä¸­æ‰“å¼€é¡¹ç›®
code /path/to/bay-area-events-scraper
```

### 3. å¯åŠ¨å®¹å™¨

**æ–¹æ³• A**: ä½¿ç”¨å‘½ä»¤é¢æ¿
1. æŒ‰ `F1` æˆ– `Cmd/Ctrl + Shift + P`
2. è¾“å…¥ `Dev Containers: Reopen in Container`
3. å›è½¦ï¼Œç­‰å¾…æ„å»ºå®Œæˆï¼ˆé¦–æ¬¡ 3-5 åˆ†é’Ÿï¼Œåç»­ 10-30 ç§’ï¼‰

**æ–¹æ³• B**: ç‚¹å‡»å·¦ä¸‹è§’
1. ç‚¹å‡» VS Code å·¦ä¸‹è§’çš„ç»¿è‰²å›¾æ ‡ `><`
2. é€‰æ‹© `Reopen in Container`

### å®Œæˆï¼

å®¹å™¨å¯åŠ¨åï¼Œä½ å°±å¯ä»¥ç«‹å³å¼€å§‹å¼€å‘äº†ï¼æ‰€æœ‰ä¾èµ–éƒ½å·²å®‰è£…å¥½ã€‚

## ğŸ“¦ å®¹å™¨åŒ…å«ä»€ä¹ˆï¼Ÿ

### è¿è¡Œç¯å¢ƒ
- **Node.js v24.8.0** - ä¸ä½ çš„è¦æ±‚å®Œå…¨åŒ¹é…
- **npm** - æœ€æ–°ç‰ˆæœ¬
- **SQLite3** - æ•°æ®åº“å·¥å…·
- **Chrome/Chromium** - Puppeteer æµè§ˆå™¨

### é¢„è£…å·¥å…·
- `nodemon` - è‡ªåŠ¨é‡å¯
- `pm2` - è¿›ç¨‹ç®¡ç†
- `typescript` - TS ç¼–è¯‘å™¨
- `git` & `github-cli` - ç‰ˆæœ¬æ§åˆ¶

### VS Code æ‰©å±•ï¼ˆè‡ªåŠ¨å®‰è£…ï¼‰

#### ä½ è¦æ±‚çš„æ‰©å±•ï¼š
- **JSON æ”¯æŒ**: ZainChen.json
- **SQLite å·¥å…·**:
  - alexcvzz.vscode-sqlite - æŸ¥è¯¢å’Œç®¡ç†æ•°æ®åº“
  - qwtel.sqlite-viewer - å¯è§†åŒ–æŸ¥çœ‹ .db æ–‡ä»¶

#### é¢å¤–çš„å®ç”¨æ‰©å±•ï¼š
- ESLint - ä»£ç æ£€æŸ¥
- Prettier - ä»£ç æ ¼å¼åŒ–
- ES7 React Snippets - React å¼€å‘
- GitLens - Git å¢å¼º
- Docker - å®¹å™¨ç®¡ç†
- npm/path IntelliSense - æ™ºèƒ½æç¤º

### ä¸­æ–‡æ”¯æŒ
- ä¸­æ–‡å­—ä½“ï¼ˆNoto CJK, WQYï¼‰
- æ”¯æŒç”ŸæˆåŒ…å«ä¸­æ–‡çš„å›¾ç‰‡å’Œ PDF

## ğŸ¯ å¸¸ç”¨æ“ä½œ

### å¼€å‘çˆ¬è™«

```bash
# åœ¨å®¹å™¨å†…çš„ç»ˆç«¯è¿è¡Œ
npm run scrape
npm run generate-post ./output/review_2024-XX-XX_XXXX.json
```

### å¼€å‘ Next.js ç½‘ç«™

```bash
cd website
npm run dev

# è®¿é—® http://localhost:3000
# ç«¯å£è‡ªåŠ¨è½¬å‘ï¼Œç›´æ¥åœ¨æœ¬åœ°æµè§ˆå™¨æ‰“å¼€å³å¯
```

### æ“ä½œ SQLite æ•°æ®åº“

**æ–¹æ³• A**: ä½¿ç”¨å‘½ä»¤è¡Œ
```bash
sqlite3 data/events.db
.tables
SELECT * FROM events LIMIT 10;
```

**æ–¹æ³• B**: ä½¿ç”¨ VS Code æ‰©å±•
1. åœ¨æ–‡ä»¶æ ‘ä¸­æ‰¾åˆ° `data/events.db`
2. å³é”®ç‚¹å‡» -> `Open Database`
3. åœ¨å·¦ä¾§è¾¹æ æŸ¥çœ‹è¡¨ç»“æ„å’Œæ•°æ®

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
DEBUG=* npm start

# æŸ¥çœ‹ç‰¹å®šæºçš„æ—¥å¿—
npm run scrape 2>&1 | grep "Eventbrite"
```

## ğŸ”§ é…ç½®ç¯å¢ƒå˜é‡

å®¹å™¨ä¼šè‡ªåŠ¨åŠ è½½ `.env` æ–‡ä»¶ï¼š

```bash
# å¦‚æœè¿˜æ²¡æœ‰ .env æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ·»åŠ ä½ çš„ API keys
# VS Code ä¼šåœ¨å®¹å™¨å†…æ‰“å¼€
code .env
```

å®¹å™¨å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šæé†’ä½ åˆ›å»ºã€‚

## ğŸ”„ å®¹å™¨ç®¡ç†

### é‡å¯å®¹å™¨

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥é‡å¯ï¼š

1. `F1` -> `Dev Containers: Rebuild Container`
2. é€‰æ‹© `Rebuild` (ä¿ç•™ç¼“å­˜) æˆ– `Rebuild Without Cache` (å®Œå…¨é‡å»º)

### åœæ­¢å®¹å™¨

å…³é—­ VS Code æˆ–è€…ï¼š

1. `F1` -> `Dev Containers: Reopen Folder Locally`

è¿™ä¼šåœæ­¢å®¹å™¨å¹¶åœ¨æœ¬åœ°æ‰“å¼€é¡¹ç›®ã€‚

### æŸ¥çœ‹å®¹å™¨èµ„æº

```bash
# åœ¨æœ¬åœ°ç»ˆç«¯ï¼ˆä¸æ˜¯å®¹å™¨å†…ï¼‰
docker ps                    # æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨
docker stats                 # æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ
docker system df             # æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
```

### æ¸…ç†æ—§å®¹å™¨å’Œé•œåƒ

```bash
# åœ¨æœ¬åœ°ç»ˆç«¯
docker system prune -a       # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„å®¹å™¨å’Œé•œåƒ
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### é¦–æ¬¡æ„å»ºä¼˜åŒ–

é¦–æ¬¡æ„å»ºå¯èƒ½éœ€è¦ 3-5 åˆ†é’Ÿï¼Œå› ä¸ºè¦ï¼š
1. ä¸‹è½½ Node.js é•œåƒï¼ˆ~300MBï¼‰
2. å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆPuppeteer, SQLite ç­‰ï¼‰
3. ä¸‹è½½ Chrome æµè§ˆå™¨
4. å®‰è£… npm ä¾èµ–

**ä½†æ˜¯**ï¼šæ„å»ºå®Œæˆåï¼Œé•œåƒä¼šè¢«ç¼“å­˜ï¼Œåç»­å¯åŠ¨åªéœ€ 10-30 ç§’ï¼

### åŠ é€ŸæŠ€å·§

1. **ä½¿ç”¨å›½å†…é•œåƒ**ï¼ˆå¦‚æœåœ¨ä¸­å›½ï¼‰:
   ç¼–è¾‘ `.devcontainer/Dockerfile`ï¼Œåœ¨é¡¶éƒ¨æ·»åŠ ï¼š
   ```dockerfile
   ENV NPM_CONFIG_REGISTRY=https://registry.npmmirror.com
   ```

2. **é¢„æ„å»ºé•œåƒ**:
   å¦‚æœå›¢é˜Ÿå¤šäººä½¿ç”¨ï¼Œå¯ä»¥é¢„æ„å»ºé•œåƒå¹¶æ¨é€åˆ° Docker Hubã€‚

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: å®¹å™¨å¯åŠ¨å¾ˆæ…¢

**åŸå› **: é¦–æ¬¡æ„å»ºæˆ–ç½‘ç»œæ…¢

**è§£å†³**:
- é¦–æ¬¡æ„å»ºéœ€è¦æ—¶é—´ï¼Œè€å¿ƒç­‰å¾…
- æ£€æŸ¥ Docker Desktop æ˜¯å¦è¿è¡Œ
- ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼ˆè§ä¸Šæ–‡ï¼‰

### é—®é¢˜ 2: Puppeteer æ— æ³•å¯åŠ¨æµè§ˆå™¨

**ç—‡çŠ¶**: `Error: Failed to launch chrome!`

**è§£å†³**:
1. æ£€æŸ¥ `devcontainer.json` ä¸­çš„ `runArgs` é…ç½®
2. é‡å»ºå®¹å™¨: `Dev Containers: Rebuild Container`
3. æŸ¥çœ‹ Dockerfile ä¸­çš„ Chrome å®‰è£…æ­¥éª¤

### é—®é¢˜ 3: ç«¯å£ 3000 å·²è¢«å ç”¨

**è§£å†³**:
- åœæ­¢æœ¬åœ°è¿è¡Œçš„æœåŠ¡: `lsof -ti:3000 | xargs kill -9`
- æˆ–ä¿®æ”¹ `devcontainer.json` ä¸­çš„ `forwardPorts`

### é—®é¢˜ 4: npm install å¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å°è¯•é‡å»º: `Dev Containers: Rebuild Container Without Cache`
3. æ£€æŸ¥ package.json è¯­æ³•
4. æŸ¥çœ‹å®¹å™¨æ—¥å¿—: `Docker Desktop -> Containers`

### é—®é¢˜ 5: æ–‡ä»¶ä¿®æ”¹ä¸ç”Ÿæ•ˆ

**åŸå› **: æ–‡ä»¶åŒæ­¥é—®é¢˜

**è§£å†³**:
1. é‡å¯å®¹å™¨
2. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨ `.gitignore` ä¸­
3. ä½¿ç”¨ `consistency=cached` é€‰é¡¹ï¼ˆå·²é…ç½®ï¼‰

## ğŸ“ æ–‡ä»¶ç»“æ„

```
.devcontainer/
â”œâ”€â”€ devcontainer.json       # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ Dockerfile             # å®¹å™¨é•œåƒå®šä¹‰
â”œâ”€â”€ post-create.sh         # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md              # è¯¦ç»†æ–‡æ¡£
```

### é…ç½®è¯´æ˜

- **devcontainer.json**: VS Code Dev Container é…ç½®
  - å®šä¹‰ä½¿ç”¨çš„ Dockerfile
  - é…ç½®ç«¯å£è½¬å‘
  - æŒ‡å®š VS Code æ‰©å±•
  - è®¾ç½®ç¯å¢ƒå˜é‡

- **Dockerfile**: Docker é•œåƒæ„å»ºæ–‡ä»¶
  - åŸºäº Node.js 24
  - å®‰è£… Puppeteer ä¾èµ–
  - å®‰è£… SQLite3
  - é…ç½®ä¸­æ–‡å­—ä½“

- **post-create.sh**: å®¹å™¨åˆ›å»ºåæ‰§è¡Œ
  - å®‰è£…é¡¹ç›®ä¾èµ–
  - æ£€æŸ¥ç¯å¢ƒé…ç½®
  - æ˜¾ç¤ºå¯ç”¨å‘½ä»¤

## ğŸ“ å­¦ä¹ èµ„æº

- [VS Code Dev Containers å®˜æ–¹æ–‡æ¡£](https://code.visualstudio.com/docs/devcontainers/containers)
- [Docker å…¥é—¨æ•™ç¨‹](https://docs.docker.com/get-started/)
- [Dev Container é…ç½®å‚è€ƒ](https://containers.dev/implementors/json_reference/)

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å®šæœŸæ›´æ–°é•œåƒ

```bash
# æ¯ä¸ªæœˆé‡å»ºä¸€æ¬¡ï¼Œè·å–æœ€æ–°ä¾èµ–
Dev Containers: Rebuild Container Without Cache
```

### 2. ä½¿ç”¨ .env ç®¡ç†å¯†é’¥

ä¸è¦æŠŠ API keys ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼Œä½¿ç”¨ `.env` æ–‡ä»¶ã€‚

### 3. æäº¤é…ç½®åˆ° Git

`.devcontainer/` ç›®å½•åº”è¯¥æäº¤åˆ° Gitï¼Œè¿™æ ·å›¢é˜Ÿæˆå‘˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç¯å¢ƒã€‚

### 4. ç›‘æ§èµ„æºä½¿ç”¨

å®šæœŸæ£€æŸ¥å®¹å™¨èµ„æºä½¿ç”¨ï¼Œé¿å…å ç”¨è¿‡å¤šå†…å­˜ï¼š

```bash
docker stats
```

## ğŸ†š Dev Container vs æœ¬åœ°å¼€å‘

| ç‰¹æ€§ | Dev Container | æœ¬åœ°å¼€å‘ |
|------|---------------|----------|
| ç¯å¢ƒä¸€è‡´æ€§ | âœ… å®Œå…¨ä¸€è‡´ | âš ï¸ å› äººè€Œå¼‚ |
| å¯åŠ¨é€Ÿåº¦ | âš ï¸ é¦–æ¬¡æ…¢ï¼Œåç»­å¿« | âœ… ç«‹å³å¯ç”¨ |
| éš”ç¦»æ€§ | âœ… å®Œå…¨éš”ç¦» | âŒ å¯èƒ½å†²çª |
| ä¾èµ–ç®¡ç† | âœ… è‡ªåŠ¨å®‰è£… | âš ï¸ æ‰‹åŠ¨é…ç½® |
| å›¢é˜Ÿåä½œ | âœ… å³å¼€å³ç”¨ | âš ï¸ éœ€è¦æ–‡æ¡£ |
| èµ„æºå ç”¨ | âš ï¸ éœ€è¦ Docker | âœ… è¾ƒå°‘ |

**æ¨è**: å›¢é˜Ÿå¼€å‘ã€CI/CD ä½¿ç”¨ Dev Containerï¼›ä¸ªäººå¿«é€Ÿæµ‹è¯•å¯ä»¥æœ¬åœ°å¼€å‘ã€‚

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å·²ç»äº†è§£äº†æ‰€æœ‰å…³äº Dev Container çš„ä¿¡æ¯ï¼Œå¼€å§‹ä½¿ç”¨å§ï¼

```bash
# 1. ç¡®ä¿ Docker Desktop è¿è¡Œ
# 2. åœ¨ VS Code ä¸­æ‰“å¼€é¡¹ç›®
# 3. F1 -> "Reopen in Container"
# 4. ç­‰å¾…æ„å»ºå®Œæˆ
# 5. å¼€å§‹å¼€å‘ï¼
```

æœ‰é—®é¢˜ï¼ŸæŸ¥çœ‹ `.devcontainer/README.md` è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚
