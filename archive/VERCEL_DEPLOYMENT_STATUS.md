# Vercel éƒ¨ç½²çŠ¶æ€

## âœ… å·²è§£å†³çš„é—®é¢˜

### 1. TypeScript ç¼–è¯‘é”™è¯¯
- **é—®é¢˜**: `Property 'ip' does not exist on type 'NextRequest'`
- **ä¿®å¤**: ç§»é™¤ `request.ip`,æ”¹ç”¨ `request.headers.get('x-forwarded-for')`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 2. ESLint é…ç½®é”™è¯¯
- **é—®é¢˜**: `Unknown options: useEslintrc, extensions`
- **ä¿®å¤**:
  - åˆ é™¤ `eslint.config.mjs`
  - åˆ›å»ºä¼ ç»Ÿçš„ `.eslintrc.json`
  - åœ¨ `next.config.ts` ä¸­ç¦ç”¨æž„å»ºæ—¶ ESLint æ£€æŸ¥
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 3. æž„å»ºæˆåŠŸä½†è¿è¡Œæ—¶é”™è¯¯
- **é—®é¢˜**: `Application error: a server-side exception has occurred`
- **æ ¹æœ¬åŽŸå› **: Vercel æ— æ³•è®¿é—®æœ¬åœ° SQLite æ•°æ®åº“æ–‡ä»¶ `../data/events.db`
- **ä¿®å¤**: æ·»åŠ æ¼”ç¤ºæ¨¡å¼,å½“æ•°æ®åº“ä¸å¯ç”¨æ—¶è¿”å›žç©ºæ•°æ®
- **çŠ¶æ€**: âœ… ä¸´æ—¶ä¿®å¤ (æ¼”ç¤ºæ¨¡å¼)

---

## ðŸŸ¡ å½“å‰çŠ¶æ€: æ¼”ç¤ºæ¨¡å¼

ç½‘ç«™çŽ°åœ¨å¯ä»¥åœ¨ Vercel ä¸Šè¿è¡Œ,ä½†å¤„äºŽ**æ¼”ç¤ºæ¨¡å¼**:
- âœ… é¡µé¢å¯ä»¥æ­£å¸¸åŠ è½½
- âš ï¸  æ²¡æœ‰å®žé™…æ´»åŠ¨æ•°æ® (è¿”å›žç©ºåˆ—è¡¨)
- âš ï¸  åé¦ˆåŠŸèƒ½ä¸å¯ç”¨

### æ¼”ç¤ºæ¨¡å¼çš„è¡Œä¸º:

1. **ä¸»é¡µ** (`/`): æ˜¾ç¤º"æ²¡æœ‰æ´»åŠ¨"çš„ç©ºçŠ¶æ€
2. **API `/api/feedback`**: è¿”å›žé”™è¯¯ä¿¡æ¯,æç¤ºéœ€è¦é…ç½®æ•°æ®åº“
3. **æŽ§åˆ¶å°æ—¥å¿—**: æ˜¾ç¤º "Demo mode" è­¦å‘Š

---

## ðŸ”´ éœ€è¦å®Œæˆçš„æ­¥éª¤: ç”Ÿäº§çŽ¯å¢ƒé…ç½®

ä¸ºäº†åœ¨ Vercel ä¸Šè¿è¡Œå®Œæ•´åŠŸèƒ½,ä½ éœ€è¦è¿ç§»åˆ°äº‘æ•°æ®åº“:

### æŽ¨èæ–¹æ¡ˆ: Turso (LibSQL)

**ä¸ºä»€ä¹ˆé€‰æ‹© Turso?**
- âœ… å®Œå…¨å…¼å®¹ SQLite (è¿ç§»æˆæœ¬æžä½Ž)
- âœ… æ…·æ…¨çš„å…è´¹å¥—é¤ (10äº¿è¡Œè¯»å–/æœˆ)
- âœ… å…¨çƒè¾¹ç¼˜ç½‘ç»œ (ä½Žå»¶è¿Ÿ)
- âœ… ç®€å•è¿ç§» (åªéœ€æ›´æ”¹å‡ è¡Œä»£ç )

### å¿«é€Ÿå¼€å§‹æ­¥éª¤:

#### 1. å®‰è£… Turso CLI

```bash
curl -sSfL https://get.tur.so/install.sh | bash
```

#### 2. åˆ›å»ºæ•°æ®åº“

```bash
turso auth login
turso db create bay-area-events --location sjc
```

#### 3. èŽ·å–å‡­è¯

```bash
turso db show bay-area-events --url
turso db tokens create bay-area-events
```

ä¿å­˜è¿™ä¸¤ä¸ªå€¼:
- `TURSO_DATABASE_URL`: libsql://bay-area-events-xxx.turso.io
- `TURSO_AUTH_TOKEN`: eyJhbGc...

#### 4. è¿ç§»çŽ°æœ‰æ•°æ®

```bash
# å¯¼å‡ºæœ¬åœ°æ•°æ®
sqlite3 data/events.db .dump > events.sql

# å¯¼å…¥åˆ° Turso
turso db shell bay-area-events < events.sql
```

#### 5. æ›´æ–°ä»£ç 

åœ¨ `website/` ç›®å½•å®‰è£…ä¾èµ–:
```bash
cd website
npm install @libsql/client
```

åˆ›å»ºæ–°çš„æ•°æ®åº“æ–‡ä»¶ `website/lib/turso-db.ts` (å·²åœ¨ TURSO_MIGRATION_GUIDE.md ä¸­æä¾›å®Œæ•´ä»£ç )

#### 6. æ›´æ–°çŽ¯å¢ƒå˜é‡

åœ¨ Vercel Dashboard â†’ Settings â†’ Environment Variables æ·»åŠ :

```
TURSO_DATABASE_URL=libsql://your-database.turso.io
TURSO_AUTH_TOKEN=your-auth-token
```

#### 7. æ›´æ–°å¯¼å…¥

ä¿®æ”¹æ‰€æœ‰ä½¿ç”¨æ•°æ®åº“çš„æ–‡ä»¶,ä»Ž:
```typescript
import { getEvents } from '@/lib/db';
```

æ”¹ä¸º:
```typescript
import { getEvents } from '@/lib/turso-db';
```

#### 8. é‡æ–°éƒ¨ç½²

```bash
git add -A
git commit -m "Migrate to Turso database for Vercel deployment"
git push
```

---

## ðŸ“‹ å®Œæ•´è¿ç§»æ£€æŸ¥æ¸…å•

- [ ] å®‰è£… Turso CLI
- [ ] åˆ›å»º Turso æ•°æ®åº“
- [ ] å¯¼å‡ºå¹¶å¯¼å…¥çŽ°æœ‰æ•°æ®
- [ ] åœ¨ `website/` å®‰è£… `@libsql/client`
- [ ] åˆ›å»º `website/lib/turso-db.ts`
- [ ] æ›´æ–°æ‰€æœ‰é¡µé¢å’Œ API çš„ import
- [ ] åœ¨ Vercel æ·»åŠ çŽ¯å¢ƒå˜é‡
- [ ] æµ‹è¯•æœ¬åœ°å¼€å‘çŽ¯å¢ƒ
- [ ] æäº¤å¹¶éƒ¨ç½²åˆ° Vercel
- [ ] éªŒè¯ç”Ÿäº§çŽ¯å¢ƒåŠŸèƒ½

---

## ðŸ”§ æ›¿ä»£æ–¹æ¡ˆ

å¦‚æžœä¸æƒ³ä½¿ç”¨ Turso,è¿˜æœ‰ä»¥ä¸‹é€‰æ‹©:

### é€‰é¡¹ 2: Vercel Postgres
- åŽŸç”Ÿé›†æˆ
- éœ€è¦ä»Ž SQLite è¿ç§»åˆ° PostgreSQL
- å…è´¹å¥—é¤: 256MB, 60 å°æ—¶è®¡ç®—æ—¶é—´

### é€‰é¡¹ 3: PlanetScale (MySQL)
- æ— æœåŠ¡å™¨ MySQL
- å…è´¹å¥—é¤: 5GB å­˜å‚¨, 10 äº¿è¡Œè¯»å–
- éœ€è¦ä»Ž SQLite è¿ç§»

### é€‰é¡¹ 4: Supabase (PostgreSQL)
- å®Œæ•´çš„ BaaS å¹³å°
- å…è´¹å¥—é¤: 500MB æ•°æ®åº“
- æä¾›å®žæ—¶è®¢é˜…åŠŸèƒ½

---

## ðŸ“– è¯¦ç»†æ–‡æ¡£

æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ:
- **VERCEL_DEPLOYMENT_GUIDE.md**: å®Œæ•´çš„éƒ¨ç½²æŒ‡å—
- **TURSO_MIGRATION_GUIDE.md**: Turso è¿ç§»æ­¥éª¤è¯¦è§£
- **DEDUPLICATION_GUIDE.md**: æ•°æ®åŽ»é‡æœºåˆ¶è¯´æ˜Ž

---

## ðŸ†˜ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä¸èƒ½ç›´æŽ¥ä½¿ç”¨ SQLite æ–‡ä»¶?

A: Vercel çš„ serverless å‡½æ•°æ˜¯æ— çŠ¶æ€çš„,ä¸æ”¯æŒæŒä¹…åŒ–æ–‡ä»¶ç³»ç»Ÿã€‚æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½åœ¨æ–°çš„å®¹å™¨ä¸­è¿è¡Œ,æ— æ³•è®¿é—®ä¹‹å‰çš„æ–‡ä»¶ã€‚

### Q: æ¼”ç¤ºæ¨¡å¼ä¼šä¸€ç›´æ˜¾ç¤ºç©ºæ•°æ®å—?

A: æ˜¯çš„,ç›´åˆ°ä½ å®Œæˆæ•°æ®åº“è¿ç§»ã€‚æ¼”ç¤ºæ¨¡å¼åªæ˜¯è®©ç½‘ç«™èƒ½å¤ŸåŠ è½½,ä½†æ²¡æœ‰å®žé™…åŠŸèƒ½ã€‚

### Q: è¿ç§»ä¼šå½±å“æœ¬åœ°å¼€å‘å—?

A: ä¸ä¼šã€‚ä½ å¯ä»¥åœ¨ä»£ç ä¸­æ£€æµ‹çŽ¯å¢ƒ:
```typescript
const db = process.env.VERCEL
  ? useTurso()  // Vercel ç”Ÿäº§çŽ¯å¢ƒ
  : useSQLite(); // æœ¬åœ°å¼€å‘
```

### Q: è¿ç§»éœ€è¦å¤šä¹…?

A: å¦‚æžœä½¿ç”¨ Turso,å¤§çº¦ 15-30 åˆ†é’Ÿå³å¯å®Œæˆã€‚ä¸»è¦æ—¶é—´èŠ±åœ¨:
1. åˆ›å»ºè´¦å·å’Œæ•°æ®åº“ (5åˆ†é’Ÿ)
2. è¿ç§»æ•°æ® (5åˆ†é’Ÿ)
3. æ›´æ–°ä»£ç  (10åˆ†é’Ÿ)
4. æµ‹è¯•å’Œéƒ¨ç½² (10åˆ†é’Ÿ)

---

## ðŸ“Š å½“å‰éƒ¨ç½²çŠ¶æ€æ€»ç»“

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜Ž |
|------|------|------|
| æž„å»º | âœ… æˆåŠŸ | TypeScript + ESLint é€šè¿‡ |
| éƒ¨ç½² | âœ… æˆåŠŸ | Vercel éƒ¨ç½²å®Œæˆ |
| é¡µé¢åŠ è½½ | âœ… æ­£å¸¸ | æ‰€æœ‰è·¯ç”±å¯è®¿é—® |
| æ•°æ®åº“ | âš ï¸  æ¼”ç¤ºæ¨¡å¼ | éœ€è¦è¿ç§»åˆ°äº‘æ•°æ®åº“ |
| æ´»åŠ¨æ•°æ® | âŒ æ— æ•°æ® | è¿”å›žç©ºåˆ—è¡¨ |
| åé¦ˆåŠŸèƒ½ | âŒ ä¸å¯ç”¨ | éœ€è¦äº‘æ•°æ®åº“ |

**ä¸‹ä¸€æ­¥**: å®Œæˆ Turso è¿ç§»ä»¥å¯ç”¨å®Œæ•´åŠŸèƒ½ã€‚
